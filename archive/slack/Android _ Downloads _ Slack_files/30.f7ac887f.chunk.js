(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"2uLe":function(e,t,a){"use strict";var n=a("mj2O"),c=a.n(n),r=a("7SM1"),i=a("s8DI"),s=a("VkHq"),o=a("Hvhg"),u=a("ERkP"),l=a("uDfI"),f=a("vTYT"),b=a("7oto"),O=a("hEj5");t.a=function useSetPreviewHeight(){var e=Object(O.a)(),t=Object(i.a)(e,2),a=t[0],n=t[1],d=Object(l.c)(function(e){return!!e.conversations.activeConversation}),j=Object(l.c)(o.c).showBranding,v=void 0!==j&&j,h=Object(s.a)().noPolicy,p=Object(l.c)(function(e){return e.session.gdpr}),m=p.hasConsent,g=p.declinedConsent,w=Object(u.useCallback)(function(){var e=0,t=!v&&h;return g&&(e+=40),t&&(e+=18),m||(e+=t?14:7),e},[g,m,h,v]),E=Object(u.useCallback)(function(){return a?a.height:200},[a]);return{setChatHeight:Object(u.useCallback)(function(){var e=Object(r.a)(c.a.mark(function _callee(e){var t,a,n,r,i=arguments;return c.a.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:if(t=i.length>1&&void 0!==i[1]&&i[1],!d||!m){c.next=3;break}return c.abrupt("return");case 3:if(a=w(),n=E(),"205px"!==(r=e?"".concat(n+155-a,"px"):"0px")){c.next=8;break}return c.abrupt("return");case 8:Object(b.a)({topic:"set-frame-height",message:{height:r,name:f.c.CHAT,transition:!0,transitionHeight:t}});case 9:case"end":return c.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),[d,m,w,E]),setPreviewRef:n,setSliderHeight:Object(u.useCallback)(Object(r.a)(c.a.mark(function _callee2(){var e;return c.a.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:e=E(),Object(b.a)({topic:"set-frame-height",message:{height:"".concat(e+80,"px"),name:f.c.SLIDER,transition:!0,transitionHeight:!1}});case 2:case"end":return t.stop()}},_callee2)})),[E]),setEmailCaptureHeight:Object(u.useCallback)(Object(r.a)(c.a.mark(function _callee3(){var e;return c.a.wrap(function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:e=E(),Object(b.a)({topic:"set-frame-height",message:{height:"".concat(e+35,"px"),name:f.c.EMAIL_CAPTURE,transition:!0,transitionHeight:!1}});case 2:case"end":return t.stop()}},_callee3)})),[E])}}},G5CQ:function(e,t,a){},Gxm1:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return o});var n=a("QtlZ"),c=a("LVcX"),r=a("0lfv"),i=a("CYoe"),s=function markTime(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();n.a.dispatch(Object(i.c)(e,t))},o=function measureTime(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),a=Object(c.a)(null,["metrics","timeByName",e],Object(n.b)());return a?(n.a.dispatch(Object(i.a)(e)),t-a):(Object(r.n)({type:"warn",data:['Tried to measure "'.concat(e,'" without mark')]}),null)}},SrLZ:function(e,t,a){"use strict";a.r(t);var n=a("jm9a"),c=a("mj2O"),r=a.n(c),i=a("7SM1"),s=a("s8DI"),o=a("OE2q"),u=a("O94r"),l=a.n(u),f=a("Rqwx"),b=a("fTFZ"),O=a("vkRn"),d=a("CwrG"),j=a("HXmn"),v=a("8eKL"),h=a("slYP"),p=a("BY8A"),m=a("+/Je"),g=a("Y0wo"),w=a("fw6E"),E=a("1b8i"),_=a("gRD2"),C=a("+qGC"),k=a("fpJs"),S=a("Sn8X"),y=a("fJrp"),T=a("ERkP"),A=a.n(T),x=a("7oto");var L=a("VkHq"),H=a("lE29"),R=a("swFs"),I=a("+Kbs"),N=a("nQD+"),M=a("sxX9"),B=a("2uLe"),D=a("g6eD"),P=a("2XY6"),V=a("uDfI"),F=(a("SwvN"),function HeaderLayout(e){var t=e.chatHidden,a=Object(V.b)(),n=Object(H.a)(),c=n.backgroundStyles,r=n.conversationHeaderTextStyles,i=Object(V.c)(function(e){return e.session.gdpr}).hasConsent,o=Object(B.a)(),u=o.setChatHeight,f=o.setPreviewRef,b=Object(V.c)(function(e){return e.view}).chatOpen,O=Object(T.useState)(Object(V.c)(P.a)),d=Object(s.a)(O,2),j=d[0],v=d[1],h=Object(y.a)(j),p=j!==h;Object(T.useLayoutEffect)(function(){b&&!t&&u(b,p)},[b,t,u,p]);var m=Object(V.c)(P.a);Object(T.useEffect)(function(){m!==j&&v(m)},[m,j]);var g=M.a[j],w=j!==M.b.CONVERSATION;return A.a.createElement("header",{className:l()("drift-widget-header",{"drift-widget-header--collapsed":w,"drift-widget-header--gdpr-consent":!i})},A.a.createElement(R.a,{style:c}),A.a.createElement("div",{className:"drift-widget-header--content"},A.a.createElement(g,{previewRef:f,resetChatHeight:function resetChatHeight(){u(b,!0)}})),A.a.createElement(N.a,{onClick:function doToggleChat(){a(Object(D.e)({chatOpen:!1}))},className:"drift-widget-close","aria-label":"Close Drift Widget messenger",style:r},A.a.createElement(I.j,{width:16,height:16})))}),G=a("vjCh"),X=a("qixE"),U=a("K7i0"),Y=a("bYXQ"),$=a("Hvhg"),q=a("pu/X"),J=a("da4L"),Q=a("Gxm1"),K=a("LVcX"),W=a("TbSn"),Z=a("kNJ0"),z=a("oPI6"),ee=a("ADGC"),te=a("MFhO"),ae=a("6lNa"),ne=a("0lfv"),ce=a("VpmR"),re=a("4c+F"),ie=a("HSQL"),se=(a("sXTY"),null),oe=function ChatLayout(){var e=Object(V.b)(),t=Object(ee.a)(),a=function useReflowFrameClassName(){var e=Object(T.useState)(""),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(T.useEffect)(function(){Object(x.c)({topic:"CONDUCTOR:reflowFrame",handler:function handler(e){var t=e.data;n(function(){return t.isXSScreenSize?"widget--xs":""})}})},[]),a}(),c=Object(T.useState)(!0),u=Object(s.a)(c,2),f=u[0],R=u[1];Object(S.a)();var I=function(){var e=Object(i.a)(r.a.mark(function _callee(){return r.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(he){e.next=2;break}return e.abrupt("return");case 2:if(!("CHAT_RESPONSE"===Object(K.a)(null,["attributes","cta","CtaType"],he))){e.next=7;break}return e.next=6,Object(X.a)(ae.b.SUBMITTED);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},_callee)}));return function sendSubmittedEventForChatResponseCampaign(){return e.apply(this,arguments)}}(),N=Object(V.c)(function(e){return e.view}),M=N.chatOpen,B=N.isChatTakeover,D=Object(V.c)($.c).showBranding,P=void 0!==D&&D,z=Object(L.a)().noPolicy,ce=!P&&z;Object(T.useLayoutEffect)(function(){B&&M&&Object(x.a)({topic:"set-frame-width-and-height",message:{className:g.a,height:"100%",max:!0,name:"chat",width:"100%"}})},[B,M]);var oe=function(){var t=Object(i.a)(r.a.mark(function _callee2(t){var a,n;return r.a.wrap(function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:if(!pe&&!B||ue){c.next=7;break}return a=Object(K.a)(null,["attributes","playbookId"],he),c.next=4,I();case 4:(n=c.sent)&&n.conversationId&&t&&t.message&&!t.message.conversationId&&(t.message.conversationId=n.conversationId),Object(G.l)(he.id,a);case 7:e(Object(U.n)(t));case 8:case"end":return c.stop()}},_callee2)}));return function doSendMessage(e){return t.apply(this,arguments)}}(),ue=Object(V.c)(function(e){return e.conversations.activeConversation}),le=Object(_.a)().fetchMessages,fe=Object(y.a)(ue),be=Object(V.c)(function(e){return e.conversations.conversations}),Oe=Object(V.c)(function(e){return e.conversations.messages}),de=Object(V.c)(function(e){return Object(K.a)({},["conversations","messages",e.conversations.activeConversation],e)}),je=Object(V.c)(function(e){return Object(K.a)(!1,["conversations","conversationStatus",e.conversations.activeConversation,"permaclosed"],e)}),ve=Object(T.useMemo)(function(){return Object(J.r)(de)},[de]),he=Object(V.c)(function(e){return e.campaigns.activeCampaign}),pe=Object(T.useMemo)(function(){return Object(K.a)(null,["attributes","campaignDisplayType"],he)===te.a.WELCOME_MESSAGE},[he]),me=Object(V.c)(function(e){return e.session.gdpr}).hasConsent,ge=Object(V.c)(function(e){return Object(K.a)(!1,["conversations","conversationStatus",ue,"endUserResponded"],e)}),we=Object(w.a)(),Ee=we.conversationHistoryOpen,_e=we.conversationHistoryEnabled,Ce=Object(H.a)().widgetBackgroundStyles;Object(T.useEffect)(function(){(function(){var t=Object(i.a)(r.a.mark(function _callee3(){var t,a,n,c,i;return r.a.wrap(function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:if(t=!ue||ue===m.a,a=fe===ue,n=!!be[ue]&&!!Oe[ue],!(t||a||n||Object(Y.e)(ue))){r.next=5;break}return r.abrupt("return");case 5:return r.prev=5,r.next=8,Object(o.h)(ue);case 8:c=r.sent,i=c.data,e(Object(U.h)({conversation:i})),le({}),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(5),Object(ne.f)(q.a.MESSAGE.FETCH_MESSAGE_OR_ACTIVE_CONVO,r.t0,!0);case 17:case"end":return r.stop()}},_callee3,null,[[5,14]])}));return function fetchInfoForActiveConversation(){return t.apply(this,arguments)}})()()},[ue,e,le,fe,be,Oe]),Object(T.useEffect)(function(){M?(function(){var e=Object(i.a)(r.a.mark(function _callee4(){return r.a.wrap(function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.a)({topic:"focus-frame",message:{name:"chat"}});case 2:case"end":return e.stop()}},_callee4)}));return function focus(){return e.apply(this,arguments)}}()(),se&&clearTimeout(se),R(!1)):se=setTimeout(function delaySetReflowHidden(){R(!0)},350)},[M]);var ke=Object(T.useMemo)(function(){if(!me||!M)return!1;if(he&&he.id&&!ue){var e=!!Object(K.a)(null,["attributes","cta"],he),t="CHAT_RESPONSE"!==Object(K.a)(null,["attributes","cta","CtaType"],he);if(e&&t)return!1}var a=ve.length>0&&ve.length<=2&&!Object(J.f)(ve[0]);return!B||a||ve.length>2},[he,ue,me,B,ve,M]);Object(T.useEffect)(function(){Object(ie.b)("WIDGET_CHAT_FRAME.start")},[]);var Se=Object(T.useRef)(!1);Object(T.useEffect)(function(){if(!Se.current&&B&&ve.length>0){var e=Object(Q.b)("post_form_takeover_tti"),t=Object(Q.b)("post_form_takeover_show");e&&Object(re.d)("Post Form Takeover TTI",e),t&&Object(re.d)("Post Form Takeover Show",t),Se.current=!0}},[B,ve]);var ye=Object(T.useMemo)(function(){if(je)return b.a.UNAVAILABLE;var e=Object(W.a)(ve);if(!e)return b.a.AVAILABLE;var t=Object(Z.a)(-2,ve),a=Object(J.f)(t)&&Object(J.i)(e);return Object(J.f)(e)||a||Object(J.j)(e)?b.a.UNAVAILABLE_BUTTONS:Object(J.o)(e)||Object(J.o)(t)&&Object(J.i)(e)?b.a.AVAILABLE_BUTTONS:b.a.AVAILABLE},[ve,je]),Te=ye===b.a.AVAILABLE||ye===b.a.AVAILABLE_BUTTONS,Ae=Object(E.a)(ve,ue),xe=Object(T.useMemo)(function(){return Object(J.d)(Ae)},[Ae]),Le=Object(C.a)(Ae),He=Object(T.useMemo)(function(){return A.a.createElement(v.a,{messageGroups:xe,messages:Ae,reflowHidden:f,disabled:Ee})},[xe,Ae,f,Ee]),Re=Object(k.a)(),Ie=me&&(!!ue||B),Ne=!ke||!Te;return A.a.createElement("main",{className:l()("drift-widget-chat-layout",Object(n.a)({"drift-widget-chat-layout__takeover":B&&!t,"drift-widget-chat-layout__takeover--noResponse":B&&!t&&!ge},a,!!a)),"aria-live":"polite"},A.a.createElement(p.a,null),A.a.createElement("div",{className:l()("drift-widget-chat-wrapper",{"drift-widget-chat-wrapper__open":M,"drift-widget-chat-wrapper__closed":!M,"drift-widget-chat-wrapper__reflow-hidden":f,"drift-widget-chat-wrapper__active-conversation":Ie,"drift-widget-chat-wrapper__no-footer-content":ce&&Ne,"drift-widget-chat-wrapper__mobile":t,"drift-widget-chat-wrapper__conversation-history":Ee}),tabIndex:0},A.a.createElement(F,{chatHidden:f}),!B&&_e&&A.a.createElement(O.a,null),Ie&&A.a.createElement("div",{className:l()("drift-widget-message-history",{"drift-widget-message-history--with-footer":Re,"drift-widget-message-history--no-composer":Ne}),style:Ce},He,0===ve.length&&A.a.createElement(j.a,{titleId:"ChatLayoutLoading"})),A.a.createElement("div",{className:"drift-widget-chat-bottom"},ke&&A.a.createElement(b.b,{state:ye,disabled:Ee,onSubmit:oe,chatHidden:f,activeConversationId:ue}),!Ee&&A.a.createElement(d.a,null)),ue&&!!Le&&A.a.createElement(h.a,{message:Le})))};t.default=function(e){var t=Object(T.useState)(!1),a=Object(s.a)(t,2),n=a[0],c=a[1],o=Object(V.c)(function(e){return e.view.initComplete}),u=Object(V.c)(function(e){return Object(K.a)("en",["embed","configuration","locale"],e)});return Object(T.useEffect)(function(){o&&!n&&function(){var e=Object(i.a)(r.a.mark(function _callee5(){return r.a.wrap(function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ce.b)(u);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(ne.n)({data:["i18n failed to load - ".concat(e.t0.message),e.t0],type:"warn",internal:!0});case 8:c(!0);case 9:case"end":return e.stop()}},_callee5,null,[[0,5]])}));return function runAsync(){return e.apply(this,arguments)}}()()},[o,n,u]),A.a.createElement(z.a,null,o&&n?A.a.createElement(oe,e):A.a.createElement(f.a,null))}},SwvN:function(e,t,a){},hEj5:function(e,t,a){"use strict";var n=a("s8DI"),c=a("ERkP"),r=a("LaGA");t.a=function useResizeObserver(){var e=Object(c.useState)(),t=Object(n.a)(e,2),a=t[0],i=t[1],s=Object(c.useState)(null),o=Object(n.a)(s,2),u=o[0],l=o[1],f=Object(c.useRef)(null),b=Object(c.useCallback)(function(){return f.current&&f.current.disconnect()},[]),O=Object(c.useCallback)(function(){u&&(f.current=new r.a(function(){return i(function getRectForRef(e){return e&&e.getBoundingClientRect()}(u))}),f.current.observe(u))},[u]);return Object(c.useLayoutEffect)(function(){return O(),function(){return b()}},[b,O]),[a,l]}},sXTY:function(e,t,a){},swFs:function(e,t,a){"use strict";var n=a("ERkP"),c=a.n(n);a("G5CQ");t.a=function TopLine(e){var t=e.style;return c.a.createElement("div",{className:"drift-widget-header-top-line",style:t})}}}]);