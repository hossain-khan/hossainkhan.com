(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+GZi":function(e,t,a){},"+qGC":function(e,t,a){"use strict";a.d(t,"a",function(){return useGetConversationRatingMessage});var n=a("da4L"),r=a("TbSn"),i=a("ERkP"),c=a("0lfv");function useGetConversationRatingMessage(e){return Object(i.useMemo)(function(){if(e&&e.length){var t=Object(r.a)(e);if(!Object(c.m)(t)){if(Object(n.l)(t))return t;if(Object(n.k)(t)){var a=e[e.length-2];if(Object(n.l)(a))return a}}}return null},[e])}},"1b8i":function(e,t,a){"use strict";var n=a("s8DI"),r=a("da4L"),i=a("ERkP");t.a=function useTimedMessages(e,t){var a=Object(i.useState)(function(){return e}),c=Object(n.a)(a,2),o=c[0],s=c[1],l=Object(i.useRef)(t),u=Object(i.useRef)(null);return Object(i.useEffect)(function(){if(t){if(e!==o){var a=o.length;if(0===e.length&&a>0)s([]);else{if(l.current!==t||a===e.length)return l.current=t,void s(e);var n=function pushMessage(){return s(e.slice(0,a+1))},i=e[a]||e[0];if(!(Date.now()-i.createdAt>6e4||Object(r.i)(i)||Object(r.j)(i)))return u.current=window.setTimeout(function(){u.current=null,n()},600),function(){u.current&&window.clearTimeout(u.current)};n()}}}else o.length>0&&s([])},[e,o,t]),o}},"2VrW":function(e,t,a){},"7IKl":function(e,t,a){"use strict";var n=a("ERkP"),r=a("Tr4L"),i=a("uDfI"),c=a("F8vJ");t.a=function useAgentName(e){var t=Object(i.c)(function(e){return e.embed.configuration}).team,a=void 0===t?[]:t,o=Object(r.a)().t;return Object(n.useMemo)(function(){var t=a.find(function(t){return t.id===e});return t&&!Object(c.a)(t.name)?t.name:o("agent")},[a,e,o])}},"8eKL":function(e,t,a){"use strict";var n=a("mj2O"),r=a.n(n),i=a("7SM1"),c=a("s8DI"),o=a("O94r"),s=a.n(o),l=a("7IKl"),u=a("lE29"),d=a("ERkP"),m=a.n(d),f=a("Tr4L"),g=a("uDfI"),b=(a("I4Wp"),function AgentTypingIndicator(){var e=Object(f.a)().t,t=Object(u.a)().messageAuthorTheme,a=Object(g.c)(function(e){return e.conversations.typingIndicators[e.conversations.activeConversation]||{}}),n=a.isTyping,r=void 0!==n&&n,i=a.userId,c=Object(l.a)(i);return r?m.a.createElement("p",{"aria-live":"polite",style:t,className:"agent-typing-indicator"},e("status.agentTyping",{agent:c})):null}),v=a("HXmn"),p=a("NJA7"),j=a("fw6E"),h=a("K7i0"),O=a("+oIK"),E=a("+f1A"),w=a("0lfv"),y=(a("yAze"),function AgentRequestedOptions(e){var t=e.message,a=t.attributes,n=t.id,o=t.conversationId,s=Object(g.b)(),l=Object(g.c)(function(e){return e.session}).endUser,u=Object(j.a)().conversationHistoryOpen,f=Object(g.c)(function(e){return e.view}).chatOpen,b=Object(d.useState)(!f),v=Object(c.a)(b,2),y=v[0],A=v[1],C=Object(g.c)(E.h),k=function doSendMessage(e){var a=e.label;return function(){var e=Object(O.a)({message:a,activeConversation:o,authorId:l.id,attributes:{buttonClicked:!0,questionId:t.attributes.questionId,instanceId:C}});s(Object(h.n)({message:e}))}};Object(d.useLayoutEffect)(function(){function _delayButtons(){return(_delayButtons=Object(i.a)(r.a.mark(function _callee(){return r.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(!f||y){e.next=4;break}return e.next=3,Object(w.q)(500);case 3:A(!0);case 4:case"end":return e.stop()}},_callee)}))).apply(this,arguments)}!function delayButtons(){return _delayButtons.apply(this,arguments)}()},[y,f]);var N=y?"visible":"hidden";return m.a.createElement("ul",{className:"drift-widget-message-group drift-widget-message-group-type--END_USER drift-bot-buttons--set drift-bot-buttons--".concat(N)},a.buttons.map(function(e,a){return m.a.createElement("li",{className:"drift-widget-button--list-item","aria-posinset":a+1,key:"bot-button-".concat(n,"-").concat(a)},m.a.createElement(p.a,{onClick:k(e),invertOnHover:!0,disabled:u,"aria-label":"".concat(e.label," - Reply as a response to ").concat(t.attributes.preview),forceFocus:f&&y&&0===a},e.label))}))}),A=a("nfbA"),C=a("efbE"),k=a("rAc1"),N=a("l6A5"),L=function urlIdentity(e){return Object(k.a)(e)},T=(Object(N.a)(L,function(e){return C.k.get("/",{params:{url:encodeURI(e)}})}),Object(N.a)(L,function(e){return C.j.get("/",{params:{url:e,iframe:1,omit_script:1,media:1}})})),S=function Retry(e){var t=e.height,a=void 0===t?24:t,n=e.width,r=void 0===n?24:n;return m.a.createElement("svg",{className:"drift-default-icon drift-default-icon--retry",width:r,height:a,viewBox:"0 0 28 24"},m.a.createElement("path",{d:"M27.82 19.074c-0.17 0.085-0.353 0.126-0.53 0.126-0.436 0-0.854-0.244-1.063-0.664l-0.994-2.010c-1.762 4.469-5.996 7.474-11.002 7.474-5.438 0-10.298-3.548-11.82-8.628-0.19-0.635 0.164-1.304 0.792-1.496 0.624-0.193 1.29 0.166 1.48 0.8 1.222 4.076 5.148 6.924 9.548 6.924 4.128 0 7.481-2.436 8.838-6.126l-2.372 1.199c-0.588 0.298-1.3 0.056-1.592-0.536s-0.055-1.313 0.53-1.609l4.748-2.401c0.589-0.296 1.301-0.055 1.594 0.538l2.374 4.8c0.294 0.593 0.055 1.314-0.53 1.61zM25.259 10.126c-0.626 0.191-1.291-0.167-1.481-0.802-1.223-4.076-5.148-6.924-9.547-6.924-4.132 0-7.486 2.437-8.842 6.127l2.375-1.201c0.588-0.296 1.301-0.055 1.592 0.538 0.294 0.593 0.056 1.314-0.53 1.61l-4.748 2.399c-0.17 0.086-0.352 0.127-0.529 0.127-0.437 0-0.856-0.242-1.063-0.662l-2.375-4.801c-0.293-0.593-0.055-1.314 0.532-1.61 0.589-0.296 1.3-0.055 1.592 0.538l0.994 2.008c1.759-4.468 5.994-7.471 11.003-7.471 5.436 0 10.296 3.548 11.819 8.628 0.191 0.635-0.164 1.304-0.791 1.498z"}))},M=a("YYte"),R=a("nQD+"),I=a("+Kbs"),x=a("fsHk"),B=function MessageFooter(e){var t=e.message,a=e.isLastGroup,n=e.isLastMessage,r=e.delivered,i=e.generated,o=e.messageTimedOut,l=e.deliveryFailed,u=e.resolveMessageHeight,g=Object(f.a)().t,b=Object(d.useState)(!1),p=Object(c.a)(b,2),j=p[0],h=p[1];if(Object(d.useEffect)(function(){return(o||r)&&Object(w.e)(function(){return h(!1)},500),r||l||j||h(!0),function(){return h(!1)}},[r,o,j,l]),Object(d.useLayoutEffect)(function(){u()},[u,r,j,a,n,l]),!r||j)return m.a.createElement("li",{key:"".concat(i,"-message-status"),className:s()("drift-widget-message drift-widget-message--meta-date drift-no-op",{"drift-widget-message-failed-status":l})},m.a.createElement("span",{"aria-live":l?"polite":"off",className:"drift-widget-message--meta-status"},!j&&l?g("status.sendMessageFailed"):m.a.createElement(v.a,{size:"small",className:"drift-widget-message--meta-status__sending",titleId:"MessageLoading-".concat(t.id)})));if(!a&&!r)return m.a.createElement("li",{key:"".concat(i,"-message-status"),className:"drift-widget-message drift-widget-message--meta-date drift-no-op"});if(n&&a){var O=x.a.unixFormatDateTime(r,g("dt.format.time.short"));return m.a.createElement("li",{key:"".concat(t.createdAt,"-message-status"),className:"drift-widget-message--meta-date drift-widget-message"},m.a.createElement("div",{className:"drift-widget-message--meta-status"},m.a.createElement(I.i,{className:"drift-widget-message-sent",height:12,width:12,title:"Message successfully delivered"}),m.a.createElement("span",{className:"drift-widget-message--meta-date-stamp"},O)))}return null},D=a("QtlZ"),F=a("mZ4K"),P=a("58kB"),U=a("da4L"),G=a("g6eD"),_=a("LVcX"),V=a("mfas"),H=a("PjZB"),z=60;function process(e){var t=null,a=null,n=!1,r=e.getAttribute("data-giffer-alt"),i=document.createElement("canvas"),c=e.getAttribute("data-giffer-duration"),o=e.getAttribute("data-giffer");e.style.display="block",e.onload=function(){if(i.getContext&&i.getContext("2d")){var s=e.width,l=e.height,u=function createContainer(e,t){var a=document.createElement("button"),n=e.getAttribute("class"),r=e.getAttribute("id"),i=["width:"+z+"px","height:"+z+"px","border-radius:"+z/2+"px","background:rgba(0, 0, 0, 0.3)","position:absolute","top:50%","left:50%","margin:-"+z/2+"px"].join(";"),c=["width: 0","height: 0","border-top: 14px solid transparent","border-bottom: 14px solid transparent","border-left: 14px solid rgba(0, 0, 0, 0.5)","position: absolute","left: 26px","top: 16px"].join(";");n&&a.setAttribute("class",e.getAttribute("class")),r&&a.setAttribute("id",e.getAttribute("id")),a.setAttribute("style","position: relative; cursor: pointer; background: none; border: none; padding: 0;"),a.setAttribute("aria-label","Play or pause GIF animation for ".concat(t));var o=document.createElement("div");o.setAttribute("class","giffer-play-button"),o.setAttribute("style",i);var s=document.createElement("div");return s.setAttribute("style",c),o.appendChild(s),a.appendChild(o),e.parentNode.replaceChild(a,e),{c:a,p:o}}(e,r),d=u.c,m=u.p,f=function calculatePercentageDim(e,t,a,n,r){var i=e.parentNode.offsetWidth,c=n/r;return t.toString().indexOf("%")>0?a=(t=(t=parseInt(t.toString().replace("%","")))/100*i)/c:a.toString().indexOf("%")>0&&(t=(a=(a=parseInt(a.toString().replace("%","")))/100*i)*c),{w:t,h:a}}(d,s,l,e.width,e.height);d.addEventListener("click",function(){clearTimeout(t),n?(n=!1,d.appendChild(m),d.removeChild(a),d.appendChild(i),a=null):(n=!0,(a=document.createElement("img")).setAttribute("style","width:100%;height:100%;"),a.setAttribute("data-uri","".concat(Math.floor(1e5*Math.random())+1)),setTimeout(function(){a.src=o},0),d.removeChild(m),d.removeChild(i),d.appendChild(a),parseInt(c)>0&&(t=setTimeout(function(){n=!1,d.appendChild(m),d.removeChild(a),d.appendChild(i),a=null},c)))}),i.width=f.w,i.height=f.h,i.getContext("2d").drawImage(e,0,0,f.w,f.h),d.appendChild(i),d.setAttribute("style","position:relative;cursor:pointer;width:"+f.w+"px;height:"+f.h+"px;background:none;border:none;padding:0;"),i.style.width="100%",i.style.height="100%",s.toString().indexOf("%")>0&&l.toString().indexOf("%")>0?(d.style.width=s,d.style.height=l):s.toString().indexOf("%")>0?(d.style.width=s,d.style.height="inherit"):l.toString().indexOf("%")>0?(d.style.width="inherit",d.style.height=l):(d.style.width=f.w+"px",d.style.height=f.h+"px")}},e.src=o}var K=a("EQxi"),Z=function LazyCard(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.a;return function(a){return m.a.createElement(d.Suspense,{fallback:m.a.createElement(t,{titleId:"LazyCardLoadingFallback"})},m.a.createElement(e,a))}},Q=function(){return m.a.createElement("div",{className:"drift-widget-message--box--loader"},m.a.createElement(v.a,{titleId:"Loading"}))},W=a("q+cq"),X=(a("CHQR"),function DefaultMessage(e){var t=e.body;return m.a.createElement("div",{className:"drift-widget-message--box drift-widget-message--STRING"},t)}),q=a("9Xg1"),J={BOT:Z(Object(d.lazy)(function(){return a.e(38).then(a.bind(null,"qfyu"))}),Q),CONVO_RATING:Z(Object(d.lazy)(function(){return a.e(39).then(a.bind(null,"6lGB"))}),Q),EMAIL_CAPTURE:Z(Object(d.lazy)(function(){return a.e(33).then(a.bind(null,"ZJQa"))}),Q),HTML:q.default,LEGACY:Z(Object(d.lazy)(function(){return Promise.resolve().then(a.bind(null,"9Xg1"))}),Q),MEETING:Z(Object(d.lazy)(function(){return a.e(31).then(a.bind(null,"c+1e"))}),function(){return m.a.createElement(W.a,{loadingFrame:!0},m.a.createElement(v.a,{titleId:"MeetingLoader"}))}),SMS_CAPTURE:Z(Object(d.lazy)(function(){return a.e(40).then(a.bind(null,"vYZB"))}),Q),SMS_SUCCESS:Z(Object(d.lazy)(function(){return a.e(36).then(a.bind(null,"oqPC"))}),Q),STRING:X},Y=a("UXBQ"),$=a("vDqi"),ee=a.n($),te=a("nJ3u"),ae=a("z24s"),ne=function FileAttachmentMessage(e){var t=e.attachment,a=void 0===t?{}:t,n=e.multi,r=e.senderType,i=void 0===r?H.d.END_USER:r,c=Object(u.a)(),o=c.activeColor,l=c.agentIconTheme,f=c.buttonStyles,g=c.svgStyles,b=Object(d.useRef)(null),v=Object(ae.a)(b);if(!a.fileName)return null;var p=i===H.d.END_USER?g:l;return m.a.createElement("a",{href:a.publicUrl,target:"_blank",rel:"nofollow noopener noreferrer",className:s()("drift-widget-message--file",{"keyboard-focused":v}),style:n?f:{},"aria-label":"Download file: ".concat(a.fileName),ref:b},m.a.createElement("style",null,"\n          .drift-widget-message--file.keyboard-focused {\n            ".concat(Object(te.a)(o,!1),"\n          }\n        ")),m.a.createElement(I.k,{fill:p.fill,width:16,height:16}),m.a.createElement("span",{className:"drift-widget-attachment--filename",title:a.fileName},a.fileName))},re=function ImageAttachmentMessage(e){var t=e.attachment,a=void 0===t?{}:t,n=e.resolveMessageHeight,r=void 0===n?function(){}:n,i=Object(d.useState)(!1),o=Object(c.a)(i,2),l=o[0],f=o[1],g=Object(u.a)().activeColor,b=Object(d.useRef)(null),v=Object(ae.a)(b);return m.a.createElement("a",{href:a.publicUrl,className:s()("drift-widget-attachment--img",{"keyboard-focused":v}),target:"_blank",ref:b,rel:"nofollow noopener noreferrer","aria-label":"Download image: ".concat(a.fileName)},m.a.createElement("style",null,"\n          .drift-widget-attachment--img.keyboard-focused {\n            ".concat(Object(te.a)(g,!1),"\n          }\n        ")),m.a.createElement("img",{src:a.publicUrl,alt:a.fileName,onLoad:function onLoad(){!l&&r(),!l&&f(!0)}}))},ie=(a("Qp3a"),function AttachmentMessage(e){var t=e.attachmentIds,a=void 0===t?[]:t,n=e.resolveMessageHeight,c=e.sentFrom,o=void 0===c?H.d.END_USER:c,l=Object(g.b)(),f=Object(g.c)(function(e){return e.conversations.attachments}),b=ee.a.CancelToken.source(),v=Object(u.a)(),p=v.agentMessageTheme,j=v.endUserMessageTheme,O=o===H.d.END_USER?j:p;Object(d.useEffect)(function(){var e=a.filter(function(e){return!f[e]}),t=function(){var t=Object(i.a)(r.a.mark(function _callee(){var t,a;return r.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Y.a)(e,b.token);case 3:t=n.sent,a=t.data,l(Object(h.e)({attachments:a})),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(0);case 10:case"end":return n.stop()}},_callee,null,[[0,8]])}));return function fetchAttachmentsForMessage(){return t.apply(this,arguments)}}();return e.length&&t(),function(){b.cancel()}},[f,a,b,l]);var E=Object(d.useMemo)(function(){return a&&a.map(function(e){return f[e]?function isImage(e){var t=e.mimeType;return/image/.test(t)&&"image/svg+xml"!==t}(f[e])?m.a.createElement(re,{attachment:f[e],key:"drift-widget-attachment--".concat(e),resolveMessageHeight:n}):m.a.createElement(ne,{multi:a.length>1,attachment:f[e],key:"drift-widget-attachment--".concat(e),senderType:o}):null})},[a,f,n,o]);return m.a.createElement("div",{style:O,className:s()("drift-widget-attachment drift-widget-message--box",{"drift-widget-attachment--multi":a&&a.length>1})},E)}),ce=(a("mQ2C"),function UnfurlMessage(e){var t=e.unfurlData,a=e.style,n=void 0===a?{}:a,r=e.resolveMessageHeight,i=void 0===r?function(){}:r,c=e.sender,o=t.html,l=t.meta,u=void 0===l?{}:l,f=t.links,b=void 0===f?{}:f,v=t.url,p=void 0===v?"":v,j=t.rel,h=void 0===j?[]:j,O=Object(g.b)();Object(d.useLayoutEffect)(function(){i(),O(Object(G.a)(!0))},[i,o,O]);var E=!!p&&!!u.title,w=!!u.description||!!u.site,y=E&&w,A=Object(_.a)(null,["thumbnail",0],b),C=Object(_.a)(p,["site"],u),k="player"===h[0],N=!k&&A;return Object(d.useMemo)(function(){return N||k||y},[N,k,y])?m.a.createElement("li",{className:"drift-widget-message drift-widget-message--unfurl drift-widget-message-sender--".concat(c)},m.a.createElement("div",{className:s()("drift-widget-message--box drift-widget-message--unfurl-container"),style:n},k&&m.a.createElement("div",{className:"drift-widget-message--unfurl-video",dangerouslySetInnerHTML:{__html:o}}),N&&m.a.createElement("div",{className:"drift-widget-message--unfurl-image"},m.a.createElement("a",{href:p,target:"_blank",rel:"nofollow noopener noreferrer","aria-label":"Go to ".concat(p)},m.a.createElement("img",{alt:"".concat(C," - thumbnail"),src:A.href,onLoad:function onLoad(){O(Object(G.a)(!0))}}))),y&&m.a.createElement("div",{className:"drift-widget-message--unfurl_meta"},u.title&&m.a.createElement("h3",{className:"drift-widget-message--unfurl_title"},m.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:p,title:u.title},u.title)),u.description&&m.a.createElement("p",{className:"drift-widget-message--unfurl_description"},u.description),u.site&&m.a.createElement("p",{className:"drift-widget-message--unfurl_site"},u.site)))):null}),oe=(a("ZP32"),function MessageSentTimestamp(e){var t=e.sender,a=e.deliveredAt,n=Object(f.a)().t;return m.a.createElement("span",{className:"drift-widget-message-timestamp drift-widget-message-timestamp--".concat(t)},x.a.unixFormatDateTime(a,n("dt.format.time.short")))}),se=function MessageComponent(e){var t,a,n=e.message,r=e.nextMessage,i=e.isLastGroup,o=e.isLastMessage,l=e.resolveMessageHeight,f=Object(d.useState)([]),b=Object(c.a)(f,2),v=b[0],p=b[1],j=Object(d.useState)(null),O=Object(c.a)(j,2),E=O[0],y=O[1],C=Object(g.b)(),k=Object(d.useRef)(),N=Object(F.a)(),L=Object(P.a)(N).recipient,I=Object(g.c)(function(e){return Object(_.a)(!1,["embed","configuration","theme","showUnfurl"],e)}),z=Object(u.a)(),Z=z.borderStyles,Q=z.endUserMessageTheme,W=z.agentMessageTheme,X=function resolveMessageComponent(e){var t=e.attributes,a=t.isBot,n=void 0!==a&&a,r=t.show_email_capture_card,i=t.conversationRating;return r?J.EMAIL_CAPTURE:Object(U.j)(e)?J.MEETING:n?J.BOT:i?J.CONVO_RATING:Object(U.m)(e)?J.SMS_CAPTURE:Object(U.n)(e)?J.SMS_SUCCESS:J.HTML}(n),q=Object(U.i)(n)?H.d.END_USER:H.d.AGENT;Object(d.useEffect)(function(){!function processGifsForAnimationControl(e){if(e)for(var t=e.querySelectorAll("[data-giffer]"),a=0;a<t.length;++a)process(t[a])}(null===k||void 0===k?void 0:k.current)},[k]),Object(d.useEffect)(function(){if(!Object(U.e)(n,"instantMeeting")){var e=Object(K.a)(n.body);e.length&&p(e)}},[n]),Object(d.useEffect)(function(){if(v.length>0){var e=document.createElement("textarea");e.innerHTML=v[0],T(e.value.replace("#61;","")).then(function(e){var t=e.data;y(Object(A.a)(Object(A.a)({},t),{},{url:v[0]}))}).catch(function(e){return Object(w.n)({data:["Failed to unfurl url: ".concat(v[0]),e]})})}},[v]),Object(d.useLayoutEffect)(function(){l(),D.a.dispatch(Object(G.a)(!0))},[l,i]);var Y=!!n.attributes.appointmentInfo||!!n.attributes.conversationRating||n.type===H.e.EMAIL_CAPTURE_CARD||n.contentType===H.c.SMS_NUMBER_REQUESTED||n.contentType===H.c.SMS_NUMBER_SUCCESS,$=!!n.body||Y,ee=I&&E,te=n.attachments&&n.attachments.length>0;if(!$&&!ee&&!te)return null;var ae=Object(_.a)(null,["createdAt"])(n),ne=Object(_.a)(null,["attributes","generatedAt"])(n),re=Object(_.a)(!1,["failedToSend"])(n),se=!ae&&x.a.isTimeAfterSeconds(x.a.getCurrentTimeEpoch(),ne,30),le=!ae&&re,ue=q===H.d.END_USER?"Sent by: You":"Sent by: ".concat(null!==(t=null===L||void 0===L?void 0:L.name)&&void 0!==t?t:"Agent");return m.a.createElement(m.a.Fragment,null,$&&m.a.createElement("li",{className:s()("drift-widget-message drift-widget-message-sender--".concat(q),{"drift-widget-message-failed":le}),ref:k},m.a.createElement(X,Object.assign({},n,{isLastGroup:i,isLastMessage:o,nextMessage:r,resolveMessageHeight:l,style:q===H.d.END_USER?Q:W})),m.a.createElement(M.a,{content:ue}),!Y&&ae&&m.a.createElement(oe,{sender:q,deliveredAt:ae}),le&&m.a.createElement(R.a,{"aria-label":'Retry uploading message "'.concat(null!==(a=null===n||void 0===n?void 0:n.body)&&void 0!==a?a:"",'"'),onClick:function doSendMessage(){C(Object(h.n)({message:Object(A.a)(Object(A.a)({},Object(V.a)(["failedToSend"],n)),{},{attributes:Object(A.a)(Object(A.a)({},n.attributes),{},{generatedAt:(new Date).valueOf()})})}))}},m.a.createElement(S,{height:12,width:12}))),ee&&m.a.createElement(ce,{unfurlData:E,resolveMessageHeight:l,style:q===H.d.END_USER?Object(A.a)({},Z):{},sender:q}),te&&m.a.createElement("li",{className:"drift-widget-message drift-widget-message-sender--".concat(q)},m.a.createElement(ie,{attachmentIds:n.attachments,resolveMessageHeight:l,sentFrom:q}),m.a.createElement(oe,{sender:q,deliveredAt:ae})),m.a.createElement(B,{message:n,isLastGroup:i,isLastMessage:o,delivered:ae,generated:ne,messageTimedOut:se,deliveryFailed:le,resolveMessageHeight:l}))},le=a("yEsl"),ue=(a("UwV1"),function getAvatarPositionClassName(e){var t=Object(U.j)(e),a=e.attributes.show_email_capture_card;return"message-group-avatar-".concat(void 0!==a&&a||t?"top":"bottom")}),de=function MessageGroupHeader(e){var t=e.senderType,a=e.senderId,n=Object(l.a)(a),r=Object(u.a)().messageAuthorTheme;return t!==H.d.AGENT?null:m.a.createElement("li",{className:"drift-widget-message-sender"},m.a.createElement("span",{className:"drift-widget-message--meta-author",style:r},n))},me=function MessageGroup(e){var t=e.messages,a=void 0===t?[]:t,n=e.isLastGroup,r=void 0!==n&&n,i=e.showTimestamp,o=void 0!==i&&i,l=e.role,g=void 0===l?"cell":l,b=e.resolveMessageHeight,v=void 0===b?function(){}:b,p=Object(f.a)().t,j=Object(u.a)().messageTimestampTheme;Object(d.useLayoutEffect)(function(){v()},[v,r,o]);var h=Object(c.a)(a,1)[0],O=Object(U.i)(h)?H.d.END_USER:H.d.AGENT,E=h.authorId,w=a[a.length-1],A=r&&Object(U.e)(w,"buttons");return m.a.createElement("div",{role:g,className:s()("drift-widget-message-group-wrapper",{"drift-widget-message-group-wrapper--last":r})},o&&m.a.createElement("p",{className:"drift-widget-message-group-timestamp",style:j},function formatTimestamp(e,t){return e>0?x.a.isTimeSame(e,"date")?"".concat(t("dt.today")," ").concat(x.a.unixFormatDateTime(e,t("dt.format.time.short"))):x.a.unixFormatDateTime(e,t("dt.format.datetime.short")):""}(a[0].createdAt,p)),m.a.createElement("ul",{className:"drift-widget-message-group drift-widget-message-group-type--".concat(O)},m.a.createElement(de,{senderType:O,senderId:E}),a.map(function(e,t){var n=t===a.length-1,i=n?null:a[t+1];return m.a.createElement(d.Fragment,{key:e.attributes.generatedAt||e.id||e.attributes.widgetGuid},n&&O===H.d.AGENT&&m.a.createElement("li",{className:s()("drift-widget-message-group-avatar",ue(e))},m.a.createElement(le.a,{id:E,size:"SMALL"})),m.a.createElement(se,{resolveMessageHeight:v,message:e,nextMessage:i,isLastMessage:n,isLastGroup:r}))})),A&&m.a.createElement(y,{message:w}))},fe=a("gRD2"),ge=a("fJrp"),be=a("7VeV"),ve=function useScroll(e,t){var a=Object(d.useRef)(),n=Object(d.useMemo)(function(){return Object(be.throttle)(250,!1,function(e){a.current&&a.current(e)})},[a]);Object(d.useEffect)(function(){a.current=e},[e]),Object(d.useEffect)(function(){var e=t.current;if(e)return e.addEventListener("scroll",n),function(){e&&e.removeEventListener("scroll",n)}},[t,n])},pe=a("qixE"),je=a("xwTo"),he=a("TbSn"),Oe=a("XuDI"),Ee=a("ADGC"),we=(a("P6Di"),function shouldShowTimestamp(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e&&!a)return!1;if(!e)return!0;var n=e?e[e.length-1].createdAt:0;return x.a.isTimeAfterHours(t[0].createdAt,n,2)}),ye=function setScrollTop(e,t,a){if(e.scrollTop!==t){var n=e.style;a&&(n["-webkit-overflow-scrolling"]="auto",n.overflow="hidden"),e.scrollTop=t,a&&(n.overflow="scroll",n["-webkit-overflow-scrolling"]="touch")}};t.a=function MessageGroupList(e){var t=e.reflowHidden,a=e.messageGroups,n=e.messages,o=e.disabled,l=void 0!==o&&o,f=e.inheritBackgroundStyle,p=void 0!==f&&f,j=e.showTimestampForFirstGroup,h=void 0===j||j,O=Object(g.b)(),E=Object(u.a)().widgetBackgroundStyles,y=Object(g.c)(je.a),A=Object(fe.a)().fetchMessages,C=Object(g.c)(function(e){return e.view}),k=C.chatOpen,N=C.shouldAutoScrollChatToBottom,L=Object(g.c)(function(e){return Object(_.a)({},["conversations","conversations",y],e)}),T=L.hasMoreMessages,S=L.nextPageMessageId,M=Object(Ee.a)(),R=Object(d.useState)(!0),I=Object(c.a)(R,2),x=I[0],B=I[1],D=Object(d.useState)(!1),F=Object(c.a)(D,2),P=F[0],z=F[1],K=Object(d.useState)(!1),Z=Object(c.a)(K,2),Q=Z[0],W=Z[1],X=Object(d.useState)(!1),q=Object(c.a)(X,2),J=q[0],Y=q[1],$=Object(d.useRef)(null),ee=Object(d.useRef)(0),te=Object(d.useRef)(!1),ae=Object(d.useMemo)(function(){return Object(he.a)(n)},[n]),ne=Object(ge.a)(ae),re=!!ne&&ae!==ne,ie=a.length,ce=!P&&T&&k,oe=Object(d.useMemo)(function(){return a.map(function(e,t){var n=t===a.length-1,r=t>0?a[t-1]:null,i=e[0].attributes.widgetGuid||e[0].id;return m.a.createElement(m.a.Fragment,{key:"messageGroup-".concat(i)},m.a.createElement(me,{role:"listitem",messages:e,isLastGroup:n,showTimestamp:we(r,e,h)}),n&&m.a.createElement(b,null))})},[a,h]),se=Object(d.useCallback)(function(){var e=Object(i.a)(r.a.mark(function _callee(e){return r.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return z(!0),W(!0),t.next=4,A({from:e});case 4:Y(!0),z(!1),Object(w.e)(function(){return W(!1)},1e3);case 7:case"end":return t.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),[A]),le=Object(d.useCallback)(function(e){e.target.scrollTop<=200&&ce&&!J&&se(S)},[se,S,ce,J]),ue=p?{}:E;ve(le,$),Object(d.useLayoutEffect)(function(){if(!(ie<1)){if(!k||P||t)!k&&re&&(te.current=!0);else{var e=Object(_.a)(0,["current","scrollHeight"],$),a=ee.current,n=re||x||te.current||N;$.current&&(n?(ye($.current,e,M),te.current=!1):J&&ye($.current,e-a,M)),(n||J)&&(ee.current=e),B(!1),Y(!1)}N&&O(Object(G.a)(!1))}},[ie,k,x,P,re,J,t,M,a,N,O]),Object(d.useEffect)(function(){Y(!1),B(!0)},[y]),Object(d.useEffect)(function(){ae&&k&&ae.viewerRecipientStatus!==H.f.READ&&!Object(U.i)(ae)&&Object(pe.c)(y)},[ae,y,k]);return m.a.createElement("div",{className:"drift-widget-message-group-list-container","aria-hidden":l},m.a.createElement("div",{style:ue,className:s()("drift-widget-message-group-list-loader",{"drift-widget-message-group-list-loader--loading":Q})},m.a.createElement(v.a,{visible:Q,titleId:"MessageGroupListLoading"})),m.a.createElement(Oe.Scrollbars,{ref:function setScrollContainerRef(e){e&&$&&($.current=e.view)},hideTracksWhenNotNeeded:!0,renderView:function renderScrollbarsView(e){var a=Object(V.a)(["WebkitOverflowScrolling"],e.style);return m.a.createElement("div",Object.assign({},e,{role:"list",style:a,className:s()("drift-widget-message-group-list",{"drift-widget-message-group-list--hidden":t})}))}},oe))}},"97O6":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAWCAYAAACFbNPBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABa9JREFUeNrsWy1z40gQla8EDAwEDAQCDAIMAgwCDA0XBgYGBu5PyM84aLgw8KDBAoMDBgsEAgQEBAQEBARclZ2uepPrne2WRrbls7PqKpWc0UxPz0y//pIyen9/Dwa6LhqNRjNzmwmPcnOl5kzrYZdOQ+GwBVcDirG5LXGNG7rWpu/O3DcuUEz7ytxW7gDT76WtjzYXAdJcW8MjFWR+EoBMAF4ra3wRmmkdG/Psq/kdac8Vfg/mtpAMiRnzt88C/xpU7yrAEZvbMxR33NLdAukZ4/okmmturicz1yNA3Be9Ku0rM2+keNlFR14DQK4UHE+K9Wwi6v94RlHnfc4HD5Uojx8826zHyQeAfJ6w6tHDa2jhz7czizwzMi969iK1Mu/cCRMjJbTa9JKDSG7M0N5MWDn9iOeUHWpl+hTs2UQZF6HvnrVNIGMFfpq8ltdEUhQeiyvr+FgLm1Pl0WVvWtb8sT6+bkZL5aBJli1ZVLKGmN+GFDM8X3exlB6UCh4qUmTe9eRFKL96VTzVF/MshZ6sjg2tDknSF4pyECoTduALl69pr3CYpDB3aP7OnhOgqP3NXBkbeocFU9/bhjBj1yJjwpRFs3Al+IjzGB6Z4fHWdW+wJlpHaP7eWqBBqRdQ5n8VvksFHL8ov/ltZd8ZvkskwvmJlXMteLdnYa96zXtI1wCEmQDYZSBX9zqHVodWsSocuCVSphiKUDNFIcAU4B9D6DkUocCYqfUs8Dh2czN2AHQVZF3N3y4YXLms98hx2fXRvHMzvmBWmvf5sPgK6EiGG7pIhgaQuDxv2XoSgGTO+N7avZK8B5JMKbT6p+mgzbPtOWIpWPNdh4rXqUOtZ2F/NFnSrqHVoQDZw1rZQ3wDKCLwCq3bZ0qXQtljeIoMijMFWDhAJtQXVta2Fc7BlIq15uEQlzEDQCfwEr/1URSAP6cw5h4gyZRwy503tyAgQ0AApTUh6R5DnqxBDs0SJk6s3aagaln1RFWsQ/KUlyPBWRoepPBfPHOx10PnOvY9CB8/gfC5Yl1JMSZQlg8AADQhlDdCuwXR3uUHyypVODSaCB4iEviULaDJ4AHGSqIYO7lIBABUTLGXAE0Y/PcOoQvll/ISsKGMehb5yFMiMZ+1dN20GcNTAmTMFCtk8WbeUoasBcDMAI4pU6B7KFoBxc49LWuqKKpNgksnQZYSzJR5GNF7dtiniAExpBAKYaINtYh+KIl50GEfzwkIX6ufnDnU+triPY8KOTsDxFHQGiEVxaN7mzsIVi5ylCwHHwuQCjwKgO5GCq9gOXxjSQuOTLDUaYvXkWjqYd1TVqy4gww3dn54z0AArC/FweXT9lwTsVBrderQ6lCA0MFqJbwCSnSLqpEFTMhAVbAEr2IHnrHnFiA1S+K7hiEpqxJFx26S4XUDuWpPd73HAR3zZrlWPHjMwk4C3sYzUT2LRfeoFNVKZBB4hEsSSDbIxX6rbB4TWp0qB+GC2no8KdK9+V2Cv03g3Y/obEzPgWPzk7HkPaCsUtz7pliXBHMsqOLCQppYeHdR8QoVm8d6Ihr7o8m6C6Fd0BK2NSbXSjslpmuWe6XO/vwfAClRXUs8Ddj6yDDubOFo2HETqhaQJCwBj9m4TPAGBZ6VTiyeYbxrZdpCkj341Q5oQyZP5qGwlfB3hTXUDXvjjtkrVarSYy1W9lLwgJS7PZjnr4KC9fktVKq05Z7AuEryBkhDaCVVlFKPfqRAO6E9C359WWjb3zymb+XXtg7PeQ7am659ET5J3xQtUCxJmEGImUfuI95fB38gDZ+7XzARmPBmPFYqZctLrnx9Bho+Vrx8WjcktT7g2AxbOADkM3uRGiDpGucTqE79weIQYg10sSD5xt5ezwL9K1/K/xIl1yk98kOfPl1A6tPWVAjwqQIeOq6VRsP/pF8vOZ/L5MP/ovewxwNABhpIp58CDAChjQWETVMlnAAAAABJRU5ErkJggg=="},"9Xg1":function(e,t,a){"use strict";a.r(t);var n=a("nfbA"),r=a("O94r"),i=a.n(r),c=a("58kB"),o=a("4bA0"),s=a.n(o),l=a("da4L"),u=a("ERkP"),d=a.n(u),m=a("oPI6"),f=a("PjZB"),g=a("y0on"),b=a("EQxi"),v=/[/.](gif)$/i,p=function HtmlMessage(e){var t=e.body,a=e.attributes,r=e.isLastMessage,l=e.authorId,p=e.isLastGroup,j=e.style,h=void 0===j?{}:j,O=e.resolveMessageHeight,E=void 0===O?function(){}:O,w=e.className,y=e.viewerRecipientStatus,A=e.authorType;Object(u.useLayoutEffect)(function(){E()},[E,t]);var C=Object(c.a)(l),k=Object(u.useMemo)(function(){return{parsedBody:s()(t,{replace:function replace(e){if("img"===e.name){var t,a,r,i,c=null!==(t=null===(a=e.attribs)||void 0===a?void 0:a.alt)&&void 0!==t?t:"",l=null!==(r=null===(i=e.attribs)||void 0===i?void 0:i.src)&&void 0!==r?r:"",u=new RegExp(v).test(l),m=Object(n.a)(Object(n.a)({},Object(o.attributesToProps)(e.attribs)),{},{onLoad:E});return u&&(m["data-giffer"]=l,m["data-giffer-alt"]=c),d.a.createElement("img",m)}if("text"===e.type){var f,g;if(e.parentNode&&"a"!==e.parentNode.name){var p=Object(b.e)(e.data);return d.a.createElement(d.a.Fragment,null,s()(p))}var j=null!==(f=null===(g=e.data)||void 0===g?void 0:g.split(/[\r\n]+/))&&void 0!==f?f:[];if(j.length>1)return d.a.createElement(d.a.Fragment,null,j.filter(Boolean).map(function(e){return d.a.createElement(d.a.Fragment,null,e,d.a.createElement("br",null))}))}else if("a"===e.name){var h={href:e.attribs.href,target:"_blank",rel:"noopener noreferrer"};return d.a.createElement("a",h,Object(o.domToReact)(e.children))}}})}},[t,E]).parsedBody,N=r&&p&&A===f.b.USER&&y!==f.f.READ,L=N?Object(g.a)(C.recipient.name,a&&""!==a.preview?a.preview:t):null;return d.a.createElement("div",{className:i()("drift-widget-message--box drift-widget-message--HTML",w),style:h},N&&d.a.createElement(m.b,{message:L,"aria-live":"polite",clearOnUnmount:!0}),d.a.createElement("div",null,k))};t.default=function(e){return Object(l.h)(e.body)?null:d.a.createElement(p,e)}},"9wXn":function(e,t,a){},Adtm:function(e,t,a){},"BA/U":function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function onKeyDownSubmit(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(a){(function isEnter(e){return"Enter"===e.key||13===e.keyCode}(a)||t&&function isSpace(e){return"Space"===e.key||32===e.keyCode}(a))&&(a.preventDefault(),e())}}},BNKP:function(e,t,a){},BY8A:function(e,t,a){"use strict";var n=a("s8DI"),r=a("QtlZ"),i=a("Hvhg"),c=a("ERkP"),o=a.n(c),s=a("rTkt");a("zoZM");t.a=function ThemeStyleSheets(){var e=Object(c.useState)(!1),t=Object(n.a)(e,2),a=t[0],l=t[1],u=Object(i.b)(Object(r.b)());return Object(c.useEffect)(function(){a||(Object(s.a)(u),Object(s.b)(u),l(!0))},[u,a]),o.a.createElement("div",{className:"drift-widget-preload-fonts","aria-hidden":"true"},o.a.createElement("span",null,"A"),o.a.createElement("strong",null,"B"))}},CHQR:function(e,t,a){},CwrG:function(e,t,a){"use strict";var n=a("O94r"),r=a.n(n),i=a("+Kbs"),c=a("lE29"),o=a("SFoa"),s=a("LVcX"),l=a("ERkP"),u=a.n(l),d=a("TVEO"),m=a("uDfI"),f=(a("p0+K"),function Drift(){var e=Object(c.a)().footerTextColor,t=Object(s.a)("",["context","page","hostname"],Object(m.c)(function(e){return e.session})),a=Object(l.useMemo)(function(){return Object(o.g)()<=1?"":"?utm_source=".concat(t,"&utm_medium=web-widget&utm_campaign=widget-referral&utm_version=v2")},[t]);return u.a.createElement("a",{href:"https://www.drift.com/powered-by".concat(a),className:"drift-widget-power",rel:"noopener noreferrer",target:"_blank",style:e},u.a.createElement(d.a,{i18nKey:"composer.footer.poweredByDrift",components:[u.a.createElement(i.c,{height:12,width:12}),u.a.createElement("span",{className:"drift-widget-power-brand"},"Drift")]}))}),g=a("VkHq"),b=a("Hvhg");a("2VrW"),t.a=function Footer(){var e=Object(m.c)(b.c).showBranding,t=void 0!==e&&e,a=Object(g.a)(),n=a.privacyPolicyLink,i=a.privacyPolicyLinkText,o=a.noPolicy,s=Object(c.a)().footerTextColor;return!t&&o?null:u.a.createElement("div",{className:r()("drift-widget-footer",{"drift-widget-footer--with-branding":t})},t&&u.a.createElement(f,null),t&&!o&&u.a.createElement("span",{className:"drift-widget-footer-privacy-spacer","aria-hidden":"true",style:s},"|"),!o&&u.a.createElement("a",{href:n,rel:"noopener noreferrer",target:"_blank",title:i,className:"drift-widget-footer-privacy-link",style:s},i))}},I4Wp:function(e,t,a){},IuzP:function(e,t,a){},JhcM:function(e,t,a){},Jrg8:function(e,t,a){},Lzfp:function(e,t,a){"use strict";var n=a("jm9a"),r=a("O94r"),i=a.n(r),c=a("+Kbs"),o=a("ERkP"),s=a.n(o),l=(a("eSyn"),function SearchLabel(e){var t=e.ariaLabel,a=void 0===t?"":t,r=e.ariaLabelledBy,o=void 0===r?"":r,l=e.className,u=void 0===l?"":l,d=e.htmlFor,m=void 0===d?"":d;return s.a.createElement("label",{"aria-label":a,"aria-labelledby":o,className:i()("drift-widget--search-label",Object(n.a)({},u,!!u)),htmlFor:m,id:"driftWidgetSearchLabel"},s.a.createElement(c.o,{titleId:o,title:a,width:12,height:12}))});a.d(t,"a",function(){return l})},Mur8:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=[{emoji:"\ud83d\ude20",value:1},{emoji:"\ud83d\ude41",value:2},{emoji:"\ud83d\ude10",value:3},{emoji:"\ud83d\ude0a",value:4},{emoji:"\ud83e\udd29",value:5}]},P6Di:function(e,t,a){},"PGb/":function(e,t,a){},Q80r:function(e,t,a){},Qp3a:function(e,t,a){},RJSH:function(e,t,a){},Sn8X:function(e,t,a){"use strict";var n=a("LVcX"),r=a("ERkP"),i=a("Tr4L"),c=a("uDfI"),o=a("0lfv"),s=a("VpmR");t.a=function useLanguageSwitcher(){var e=Object(i.a)().i18n,t=Object(c.c)(function(e){return Object(n.a)("en",["embed","configuration","locale"],e)});Object(r.useEffect)(function(){e&&Object(o.l)(e.changeLanguage)&&e.changeLanguage(Object(s.c)(t))},[e,t])}},UXBQ:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"a",function(){return i});var n=a("efbE"),r=function uploadAttachment(e,t){var a=new FormData;return a.append("conversationId",t),a.append("file",e),n.a.post("/attachments",a)},i=function fetchAttachments(e,t){return n.a.get("/attachments",{params:{id:e},cancelToken:t})}},UwV1:function(e,t,a){},YYte:function(e,t,a){"use strict";a.d(t,"a",function(){return InvisibleContent});var n=a("hX/4"),r=a("ERkP"),i=a.n(r),c=(a("fpMl"),{label:function label(e){return i.a.createElement("label",Object.assign({htmlFor:e.htmlFor},e))},span:function span(e){return i.a.createElement("span",e)}});function InvisibleContent(e){var t=e.content,a=void 0===t?"":t,r=e.type,o=void 0===r?"span":r,s=Object(n.a)(e,["content","type"]),l=c[o];return i.a.createElement(l,Object.assign({className:"visually-hidden"},s),a)}},ZGTz:function(e,t,a){"use strict";var n=a("mj2O"),r=a.n(n),i=a("7SM1"),c=a("s8DI"),o=a("O94r"),s=a.n(o),l=a("HXmn"),u=a("LVcX"),d=a("ERkP"),m=a.n(d),f=a("Tr4L"),g=a("uDfI"),b=a("oFTC"),v=(a("uqJV"),a("Q80r"),Object(d.lazy)(function(){return Promise.all([a.e(9),a.e(42)]).then(a.bind(null,"tBak"))})),p=function EmojiPickerLoader(e){var t=e.loadingText;return m.a.createElement("div",{className:"drift-widget-emoji-picker--loader"},m.a.createElement("p",null,t),m.a.createElement(l.a,{titleId:"EmojiPicker"}))};t.a=function EmojiPicker(e){var t=e.open,n=e.onAddEmoji,o=e.onClickOutside,l=Object(f.a)().t,j=Object(g.c)(function(e){return e.conversations}).activeConversation,h="en"!==Object(g.c)(function(e){return Object(u.a)("en",["embed","configuration","locale"],e)}),O=Object(d.useMemo)(function(){return function createEmojiMartI18nProp(e){return{search:e("emoji.search"),clear:e("emoji.clear"),notfound:e("emoji.notfound"),skintext:e("emoji.skintext"),categories:{search:e("emoji.category.search"),recent:e("emoji.category.recent"),smileys:e("emoji.category.smileys"),people:e("emoji.category.smileys"),nature:e("emoji.category.nature"),foods:e("emoji.category.foods"),activity:e("emoji.category.activity"),places:e("emoji.category.places"),objects:e("emoji.category.objects"),symbols:e("emoji.category.symbols"),flags:e("emoji.category.flags"),custom:e("emoji.category.custom")},categorieslabel:e("emoji.categorieslabel"),skintones:{1:e("emoji.skintone1"),2:e("emoji.skintone2"),3:e("emoji.skintone3"),4:e("emoji.skintone4"),5:e("emoji.skintone5"),6:e("emoji.skintone6")}}}(l)},[l]),E=Object(d.useRef)(null),w=Object(d.useState)(null),y=Object(c.a)(w,2),A=y[0],C=y[1];Object(d.useEffect)(function(){t&&!A&&function(){var e=Object(i.a)(r.a.mark(function _callee(){return r.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.e(45).then(a.t.bind(null,"8ozv",3)).then(function(e){return C(e.default)});case 2:case"end":return e.stop()}},_callee)}));return function fetchEmojiData(){return e.apply(this,arguments)}}()()},[t,A]),Object(b.a)(E,function(e){o(e)});return m.a.createElement("div",{ref:E,className:s()("drift-widget-composer-emoji-picker",{"drift-widget-composer-emoji-picker--open":t,"drift-widget-composer-emoji-picker--full":j,"drift-widget-composer-emoji-picker--mini":!j,"drift-widget-composer-emoji-picker--hide-search":h})},m.a.createElement(d.Suspense,{fallback:m.a.createElement(p,{loadingText:l("status.loading")})},!!A&&m.a.createElement(v,{darkMode:!1,hideSearch:h,onSelect:function addEmojiToMessage(e){var t=e.native;n(function(e){return"".concat(e," ").concat(t)})},sheetSize:64,set:"apple",data:A,exclude:["flags","symbols","objects"],perLine:6,emojiTooltip:!h,i18n:O,showPreview:!1,showSkinTones:!1,onClickOutside:o})))}},ZP32:function(e,t,a){},eSyn:function(e,t,a){},ey6Y:function(e,t,a){"use strict";var n=a("58kB"),r=a("Tr4L");t.a=function useMeetingRecipients(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=Object(r.a)().t,i=Object(n.a)(e).recipient;return i.id?t.length?a("meeting.recipients",{name:i.name,others:t.length}):"".concat(i.name):""}},fTFZ:function(e,t,a){"use strict";var n=a("nfbA"),r=a("WwEg"),i=a("s8DI"),c=a("nJ3u"),o=a("O94r"),s=a.n(o),l=a("ZGTz"),u=a("mj2O"),d=a.n(u),m=a("7SM1"),f=a("efbE"),g=["en","es","pt","id","fr","ar","tr","th","vi","de","it","ja","zh-CN","zh-TW","ru","ko","pl","nl","ro","hu","sv","cs","hi","bn","da","fa","tl","fi","iw","ms","no","uk"],b=function localeToGiphyLang(e){switch(e){case"de-DE-formal":return"de";case"zh":return"zh-CN";case"zh-HK":return"zh-TW";case"pt-BR":return"pt"}return g.includes(e)?e:"en"},v=function getTrendingGiphys(e){return f.h.get("/trending",{params:{limit:e,rating:"pg"}})},p=function getSearchGiphys(e,t){var a=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).locale;return f.h.get("/search",{params:{limit:t,q:e,lang:b(a),rating:"pg"}})},j=a("Lzfp"),h=a("+Kbs"),O=a("zJmF"),E=a("LVcX"),w=a("uDfI"),y=function useEmbedLocale(){return Object(w.c)(function(e){return Object(E.a)("en",["embed","configuration","locale"],e)})},A=a("nvPd"),C=a("jITz"),k=a("97O6"),N=a.n(k),L=a("ERkP"),T=a.n(L),S=a("Tr4L"),M=a("ADGC"),R=a("oFTC"),I=a("0lfv");function resetFocus(e){Object(I.m)(e)||e.focus()}a("Adtm");function GiphyPreview(e){var t,a=e.addGiphyToMessage,n=e.giphy,r=null!==(t=null===n||void 0===n?void 0:n.title)&&void 0!==t?t:"Gif from Giphy";return T.a.createElement("li",{className:"drift-widget-composer-giphy-list-item"},T.a.createElement("button",{"aria-label":r,className:"giphy-button",onClick:function handleOnClick(){return a(n)}},T.a.createElement("img",{alt:r,"aria-label":r,className:"giphy-animated",src:n.images.preview_gif.url}),T.a.createElement("img",{alt:r,"aria-label":r,className:"giphy-still",src:n.images.original_still.url})))}a("RJSH");function filterBrokenGifLinks(e){return e.filter(function filterBrokenGif(e){var t=Object(E.a)(null,["images","preview_gif","url"],e),a=Object(E.a)(null,["images","original_still","url"],e);return!(!t||!a)})}var x,B,D=function GiphyPicker(e){var t=e.onAddGiphy,a=e.disabled,n=void 0!==a&&a,r=Object(S.a)().t,c=y(),o=Object(L.useState)([]),l=Object(i.a)(o,2),u=l[0],f=l[1],g=Object(L.useState)(!1),b=Object(i.a)(g,2),E=b[0],w=b[1],k=Object(L.useState)(!1),x=Object(i.a)(k,2),B=x[0],D=x[1],F=Object(L.useRef)(null),P=Object(L.useRef)(null),U=Object(L.useRef)(null),G=Object(A.a)(""),_=G.value,V=G.onChange,H=Object(C.a)({targetKey:"Escape"}),z=Object(M.a)(),K=Object(L.useMemo)(function(){return Object(I.d)(function(){var e=Object(m.a)(d.a.mark(function _callee(e){var t,a;return d.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p(e,51,{locale:c});case 2:t=n.sent,a=t.data,f(filterBrokenGifLinks(a.data));case 5:case"end":return n.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),200,!1)},[c]),Z=Object(L.useCallback)(Object(m.a)(d.a.mark(function _callee2(){var e,t;return d.a.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v(51);case 2:e=a.sent,t=e.data,f(filterBrokenGifLinks(t.data));case 5:case"end":return a.stop()}},_callee2)})),[]);Object(R.a)(F,function(){E&&(w(!1),resetFocus(null===U||void 0===U?void 0:U.current),D(!0))}),Object(L.useEffect)(function(){E&&Z()},[E,Z]),Object(L.useEffect)(function(){E&&H&&w(!1)},[H,E]),Object(L.useEffect)(function(){E&&(_.length>0?K(_):Z())},[_,E,K,Z]),Object(L.useEffect)(function(){if(B){var e=window.setTimeout(function(){D(!1)},200);return function(){window.clearTimeout(e)}}},[B]);var Q=Object(L.useCallback)(function(e){var a,n=e.images,r=e.title;t("\n      <img\n        alt=".concat(void 0===r?"gif":r,'\n        src="').concat(null===n||void 0===n?void 0:null===(a=n.original)||void 0===a?void 0:a.url,'"\n      />\n    ')),w(!1),resetFocus(null===U||void 0===U?void 0:U.current)},[t]);return T.a.createElement(T.a.Fragment,null,T.a.createElement("button",{className:"drift-widget-composer-giphy-toggle",onClick:function openGiphy(e){if(B)return e.preventDefault();w(function(e){return!e})},"aria-label":"".concat(E?"close":"open"," GIF picker"),"aria-pressed":E,disabled:n},T.a.createElement(h.m,null)),T.a.createElement("div",{"aria-expanded":E,tabIndex:-1,className:s()("drift-widget-composer-giphy-picker",{"drift-widget-composer-giphy-picker--show":E,"drift-widget-composer-giphy-picker--mobile":z}),ref:F},T.a.createElement("div",{className:"drift-widget-composer-giphy-picker-search"},T.a.createElement(j.a,{ariaLabel:"Search for a GIF",ariaLabelledBy:"searchGIF",className:"drift-widget--giphy-picker-search-label",htmlFor:"giphy-picker-search"}),T.a.createElement(O.a,{type:"search",placeholder:r("gifPicker.searchPlaceholder"),value:_,onChange:V,onFocus:function onInputFocus(e){z&&e.stopPropagation()},"aria-label":"Search GIFs","aria-live":"polite",id:"giphy-picker-search",shouldFocus:E&&!z}),!!_&&T.a.createElement("button",{"aria-label":"Clear GIF search field",className:"drift-widget--giphy-picker-search-clear",onClick:function clearInput(){var e;V(null),null===P||void 0===P||null===(e=P.current)||void 0===e||e.focus()}},T.a.createElement(h.j,null))),T.a.createElement("div",{className:"drift-widget-composer-giphy-picker-list-wrapper"},T.a.createElement("ul",{className:"drift-widget-composer-giphy-list"},u.map(function(e,t){return T.a.createElement(GiphyPreview,{addGiphyToMessage:Q,giphy:e,key:"".concat(e.id,"-").concat(t)})}))),T.a.createElement("span",{className:"drift-widget-composer-giphy-picker-power"},T.a.createElement("img",{src:N.a,alt:r("gifPicker.poweredBy")}))))},F=a("908p"),P=a("YYte"),U=a("nQD+"),G=a("HXmn"),_=a("mZ4K"),V=a("UXBQ"),H=a("K7i0");!function(e){e.NONE="NONE",e.PENDING="PENDING",e.ERROR="ERROR",e.SIZE_ERROR="SIZE_ERROR"}(x||(x={})),function(e){e[e.DEFAULT=26214400]="DEFAULT"}(B||(B={}));var z=function useAttachmentUpload(e){var t=e.onAttachmentUploadComplete,a=e.activeConversation,n=Object(w.b)(),r=Object(L.useState)(x.NONE),c=Object(i.a)(r,2),o=c[0],s=c[1],l=Object(w.c)(function(e){return Object(E.a)(!1,["embed","configuration","theme"],e)}).allowEndUserFileUpload,u=Object(L.useCallback)(function(){var e=Object(m.a)(d.a.mark(function _callee(e){var r,i,c,u;return d.a.wrap(function _callee$(d){for(;;)switch(d.prev=d.next){case 0:if(l){d.next=2;break}return d.abrupt("return");case 2:if(o!==x.ERROR){d.next=4;break}return d.abrupt("return");case 4:return s(x.PENDING),r=e.filter(function(e){return e.size<B.DEFAULT}).map(function(e){return Object(V.b)(e,a)}),d.prev=6,d.next=9,Promise.all(r);case 9:i=d.sent,c=i.map(function(e){return e.data}),u=c.map(function(e){return e.id}),n(Object(H.e)({attachments:c})),t(u),s(x.NONE),d.next=20;break;case 17:d.prev=17,d.t0=d.catch(6),s(x.ERROR);case 20:case"end":return d.stop()}},_callee,null,[[6,17]])}));return function(t){return e.apply(this,arguments)}}(),[a,l,o,n,t]);return{attachmentState:o,uploadAttachments:u,resetAttachmentState:function resetAttachmentState(){s(x.NONE)}}},K=a("vLHT"),Z=a("SFoa"),Q=a("iJtH"),W=a("t8ds");function isJapaneseWidget(){var e,t,a;return(null===(e=Object(Z.e)())||void 0===e?void 0:e.indexOf("ja"))>-1||(null===(t=navigator)||void 0===t?void 0:null===(a=t.language)||void 0===a?void 0:a.indexOf("ja"))>-1}var X=a("Za8o"),q=a("z24s"),J=a("0B8E"),Y=function usePasteFiles(e){var t=e.inputRef,a=Object(L.useState)([]),n=Object(i.a)(a,2),c=n[0],o=n[1],s=Object(L.useState)(null),l=Object(i.a)(s,2),u=l[0],d=l[1],m=Object(L.useCallback)(function(e){if(e.clipboardData&&e.clipboardData.files){var t=Object(r.a)(e.clipboardData.files);t.length&&o(Object(J.a)([].concat(Object(r.a)(c),Object(r.a)(t)))),t.length&&d(e.clipboardData.getData("Text"))}},[c]);return Object(L.useEffect)(function(){t&&(t.current.onpaste=m)},[t,m]),{pastedTextFromFiles:u,pastedFiles:c,clearFiles:function clearFiles(){o([]),d(null)}}},$=a("58kB"),ee=a("lE29"),te=a("qwiD"),ae=a("7VeV"),ne=function useTypingIndicators(e){var t=e.activeConversationId,a=Object(w.b)(),n=Object(L.useRef)(),r=Object(w.c)(function(e){return e.session.endUser.type}),i=Object(w.c)(function(e){return e.session.endUser.id}),c=Object(L.useCallback)(function(e){a(Object(te.e)("chat","user","typing:".concat(e),{userId:i,userType:r,conversationId:t,participants:[]}))},[t,a,i,r]),o=Object(L.useMemo)(function(){return Object(ae.throttle)(5e3,!1,function(){return c("started")})},[c]);return{sendTypingStarted:function sendTypingStarted(){o(),n.current&&window.clearTimeout(n.current),n.current=window.setTimeout(function(){return c("finished")},5e3)},sendTypingFinished:function sendTypingFinished(){n.current&&(window.clearTimeout(n.current),n.current=null),c("finished")}}},re=a("bYXQ"),ie=a("Hvhg"),ce=a("+oIK"),oe=a("U505"),se=a("ovDp");function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var le=L.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.0645 9.4955L14.4025 9.713C14.2785 10.143 14.1065 10.558 13.889 10.953L14.906 12.2865C15.058 12.485 15.0395 12.765 14.8635 12.9425L13.4845 14.3305C13.3105 14.506 13.0335 14.528 12.8335 14.3805L11.4705 13.3785C11.0725 13.5985 10.653 13.773 10.2175 13.9L9.9955 15.566C9.9625 15.8145 9.7505 16 9.5 16H7.5C7.2485 16 7.0365 15.813 7.004 15.5645L6.79 13.9045C6.361 13.7815 5.947 13.611 5.553 13.3955L4.2125 14.4075C4.0135 14.5575 3.7355 14.538 3.559 14.3635L2.1695 12.985C1.9945 12.811 1.9725 12.535 2.118 12.335L3.113 10.973C2.8875 10.567 2.711 10.141 2.5845 9.7005L0.938 9.496C0.688 9.465 0.5 9.2525 0.5 9V7C0.5 6.748 0.687 6.5355 0.937 6.5045L2.595 6.2935C2.7235 5.854 2.901 5.432 3.125 5.0315L2.098 3.7185C1.9425 3.5195 1.9595 3.2365 2.137 3.058L3.5165 1.6695C3.693 1.492 3.974 1.472 4.174 1.624L5.521 2.6485C5.9225 2.4265 6.3455 2.251 6.7845 2.124L7.004 0.4355C7.0365 0.1865 7.249 0 7.5 0H9.5C9.7525 0 9.9655 0.1885 9.9965 0.439L10.202 2.1225C10.627 2.245 11.0375 2.414 11.4295 2.627L12.787 1.5935C12.9865 1.4425 13.2655 1.4605 13.4425 1.6365L14.8305 3.016C15.0075 3.192 15.028 3.472 14.8775 3.6715L13.861 5.0215C14.086 5.4225 14.2645 5.8455 14.394 6.2855L16.065 6.5045C16.3135 6.537 16.5 6.7485 16.5 7V9C16.5 9.251 16.3135 9.4635 16.0645 9.4955ZM15.5 7.4385L13.9305 7.233C13.724 7.2065 13.5555 7.0535 13.5085 6.8505C13.3775 6.2855 13.152 5.75 12.8375 5.2595C12.725 5.0835 12.7335 4.856 12.8595 4.689L13.8165 3.418L13.0465 2.653L11.7705 3.6245C11.605 3.75 11.38 3.761 11.2045 3.652C10.716 3.35 10.1885 3.134 9.637 3.009C9.431 2.963 9.2765 2.792 9.2505 2.5825L9.0575 1H7.939L7.7325 2.588C7.7055 2.796 7.552 2.9645 7.3475 3.011C6.7825 3.1395 6.246 3.3625 5.7525 3.6735C5.576 3.7845 5.3495 3.7745 5.183 3.648L3.917 2.6855L3.157 3.4495L4.124 4.686C4.2545 4.8535 4.2655 5.0845 4.1515 5.263C3.837 5.7555 3.6115 6.2925 3.48 6.8595C3.433 7.0635 3.264 7.2165 3.056 7.2425L1.5 7.4405V8.5585L3.046 8.7505C3.2555 8.7765 3.426 8.9315 3.472 9.1375C3.598 9.7 3.821 10.2375 4.134 10.7355C4.2425 10.909 4.235 11.1315 4.114 11.297L3.179 12.5775L3.956 13.348L5.2165 12.397C5.3815 12.2725 5.606 12.2625 5.781 12.3715C6.2695 12.6745 6.798 12.892 7.3525 13.017C7.557 13.0635 7.711 13.2325 7.738 13.441L7.9395 15H9.062L9.2705 13.4345C9.298 13.228 9.451 13.0595 9.6545 13.013C10.214 12.8845 10.746 12.6635 11.235 12.3565C11.4085 12.247 11.632 12.255 11.7975 12.3775L13.079 13.3195L13.847 12.5465L12.8905 11.293C12.764 11.1275 12.754 10.901 12.8645 10.7245C13.17 10.2355 13.3895 9.7055 13.5155 9.1505C13.562 8.946 13.7305 8.792 13.938 8.7655L15.5 8.561V7.4385ZM8.5 11.009C6.8455 11.009 5.5 9.6635 5.5 8.009C5.5 6.355 6.8455 5.009 8.5 5.009C10.1545 5.009 11.5 6.355 11.5 8.009C11.5 9.6635 10.1545 11.009 8.5 11.009ZM8.5 6.009C7.397 6.009 6.5 6.9065 6.5 8.009C6.5 9.1115 7.397 10.009 8.5 10.009C9.603 10.009 10.5 9.1115 10.5 8.009C10.5 6.9065 9.603 6.009 8.5 6.009Z",fill:"#687882"});function SvgGearWheel(e,t){return L.createElement("svg",_extends({width:17,height:16,viewBox:"0 0 17 16",fill:"none",ref:t},e),le)}var ue=L.forwardRef(SvgGearWheel);a.p,a("iaVW");function AdditionalSettings(e){var t=e.disabled,a=e.setUseEnter,n=e.useEnter,r=Object(L.useRef)(),c=Object(L.useRef)(),o=function useToggleState(){var e=Object(L.useState)(!1),t=Object(i.a)(e,2),a=t[0],n=t[1];return[a,function(){n(function(e){return!e})}]}(),s=Object(i.a)(o,2),l=s[0],u=s[1],d=Object(C.a)({targetKey:"Escape"});Object(R.a)(c,u),Object(L.useEffect)(function(){l&&d&&u()},[d,u,l]);var m=function handleOnChange(e){Object(I.n)({type:"log",data:["AdditionalSettings","ModifiedEnterBehaviour:"+e],internal:!0}),a()};return T.a.createElement(T.a.Fragment,null,T.a.createElement("button",{"aria-hidden":t,"aria-label":"".concat(l?"close":"open"," composer settings"),className:"drift-widget-composer-additional-settings",disabled:t,onClick:function handleSettingsGearClicked(){Object(I.n)({type:"log",data:["AdditionalSettings","SettingsGearClicked"],internal:!0}),u()},ref:r},T.a.createElement(ue,null)),l&&T.a.createElement("div",{className:"drift-widget-composer-additional-settings--overlay",ref:c},T.a.createElement("span",null,"Press ",T.a.createElement("span",{className:"keyboard-key"},"Enter")," to\u2026"),T.a.createElement("label",{htmlFor:"sendIt"},T.a.createElement("input",{id:"sendIt",type:"radio",onChange:function onChange(){return m("sendMessage")},checked:n}),"Send the message"),T.a.createElement("label",{htmlFor:"newLine"},T.a.createElement("input",{id:"newLine",type:"radio",onChange:function onChange(){return m("newLine")},checked:!n}),"Start a new line")))}function AttachmentIconButton(e){var t=e.isDisabled,a=e.open;return T.a.createElement("button",{"aria-label":"Add an attachment",className:"drift-widget-composer-file-attachment",disabled:t,onClick:a},T.a.createElement(h.a,null))}function FileAttachmentErrorBanner(e){var t=e.attachmentState,a=e.clearFiles,n=e.disabled,r=e.reset,i=Object(L.useRef)(null),c=Object(S.a)().t;Object(L.useEffect)(function(){i.current&&i.current.focus()},[i]);return T.a.createElement("div",{className:"drift-widget-attachment-send-status drift-widget-attachment-send-status--failed"},T.a.createElement("span",{ref:i,tabIndex:-1,"aria-live":"assertive",className:"drift-widget-attachment-send-status--text"},c(t===x.SIZE_ERROR?"attachment.errorSize":"attachment.error")),T.a.createElement(U.a,{"aria-label":"Failed to upload attachment. Close error message.",onClick:function handleOnClick(){r(),a()},className:"drift-widget-attachment-send-status--close",disabled:n},T.a.createElement(h.j,{width:10,height:10})))}a("IuzP");a.d(t,"a",function(){return de});var de,me="GIF",fe="TEXT",ge=function validateMessageText(e){return!Object(I.m)(e)&&e.trim().length>0};!function(e){e[e.AVAILABLE=0]="AVAILABLE",e[e.AVAILABLE_BUTTONS=1]="AVAILABLE_BUTTONS",e[e.UNAVAILABLE=2]="UNAVAILABLE",e[e.UNAVAILABLE_BUTTONS=3]="UNAVAILABLE_BUTTONS"}(de||(de={}));t.b=function Composer(e){var t=e.onSubmit,a=e.activeConversationId,o=e.disabled,u=void 0!==o&&o,f=e.chatHidden,g=e.alwaysShowSendAction,b=void 0!==g&&g,v=e.useGifPicker,p=void 0===v||v,j=e.alwaysShow,O=void 0!==j&&j,y=Object(M.a)(!0),A=Object(L.useRef)(null),C=Object(L.useRef)(null),k=Object(K.a)(),N=function useEnterToSubmit(){var e=Object(L.useState)(!0),t=Object(i.a)(e,2),a=t[0],n=t[1],r=Object(M.a)();return Object(L.useEffect)(function(){function _initialStateFromStorage(){return(_initialStateFromStorage=Object(m.a)(d.a.mark(function _callee(){var e,t;return d.a.wrap(function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,W.a.get(Q.c);case 3:e=a.sent,t=e.data,n(Object(I.m)(t)?!isJapaneseWidget():t),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.warn(a.t0);case 11:case"end":return a.stop()}},_callee,null,[[0,8]])}))).apply(this,arguments)}r||function initialStateFromStorage(){return _initialStateFromStorage.apply(this,arguments)}()},[r]),[a,function(){n(function(e){return W.a.set(Q.c,!e),!e})}]}(),R=Object(i.a)(N,2),B=R[0],V=R[1],H=Object(L.useState)(""),Z=Object(i.a)(H,2),J=Z[0],te=Z[1],ae=Object(L.useState)(!1),le=Object(i.a)(ae,2),ue=le[0],be=le[1],ve=Object(q.a)(A),pe=Object(L.useState)([]),je=Object(i.a)(pe,2),he=je[0],Oe=je[1],Ee=Object(w.c)(function(e){return e.view}),we=Ee.matchedHours,ye=Ee.chatOpen,Ae=Object(w.c)(function(e){return e.conversations.attachments}),Ce=Object(w.c)(function(e){return e.session.endUser.id}),ke=Object(w.c)(function(e){return Object(E.a)(!1,["embed","configuration","theme"],e)}).allowEndUserFileUpload,Ne=Object(w.c)(ie.h),Le=p&&Ne,Te=Object(S.a)().t,Se=Object(_.a)(),Me=Object(ee.a)(),Re=Me.activeColor,Ie=Me.composerTheme,xe=Me.composerButtonHoverColor,Be=Object($.a)(Se).recipient,De=Y({inputRef:A}),Fe=De.pastedFiles,Pe=De.clearFiles,Ue=ne({activeConversationId:a}),Ge=Ue.sendTypingStarted,_e=Ue.sendTypingFinished,Ve=z({activeConversation:a,onAttachmentUploadComplete:Object(L.useCallback)(function onAttachmentUploadComplete(e){Oe(function(t){return[].concat(Object(r.a)(t),Object(r.a)(e))}),Pe()},[])}),He=Ve.attachmentState,ze=Ve.uploadAttachments,Ke=Ve.resetAttachmentState,Ze=k===de.AVAILABLE||k===de.AVAILABLE_BUTTONS,Qe=Object(L.useMemo)(function(){return!O&&(u||!Ze)},[O,u,Ze]),We=Object(se.a)({onDrop:ze,disabled:u||!Ze||!ke}),Xe=We.getRootProps,qe=We.getInputProps,Je=We.open,Ye=ge(J)||!Object(I.m)(he),$e=He===x.PENDING,et=He===x.ERROR||He===x.SIZE_ERROR,tt=u||!Ze||!!Fe.length;var at=Object(L.useCallback)(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fe,i=he?{attachments:he}:{},c=a?{}:{sentWelcomeMessage:we};_e();var o=r===fe?Object(I.r)(e):e;t({message:Object(ce.a)(Object(n.a)({message:o,activeConversation:a||null,authorId:Ce,attributes:c},i))}),te(""),Oe([]),Ke(),function setFocusOnComposer(){A.current.focus(),A.current.classList.remove("focus-visible")}()},[a,Ce,we,t,Ke,_e,he]);Object(L.useEffect)(function(){ke?Fe.length&&!$e&&ze(Fe):Pe()},[ke,$e,Pe,Fe,ze]),Object(L.useEffect)(function(){a&&te("")},[a]),Object(X.a)(A,ye&&Ze&&!f&&k===de.AVAILABLE);var nt=Object(L.useMemo)(function(){return Ze?Te("composer.replyToPlaceholder",{name:Be.name}):Te(k===de.UNAVAILABLE_BUTTONS?"composer.chooseOptionAbove":"composer.replyDisabled")},[Ze,Be.name,k,Te]),rt=ke&&!Object(re.c)(a),it=Le&&!Ye&&!!a,ct=b||!Le||Ye,ot=rt||ct||it,st=u||!Ye||$e;return T.a.createElement(T.a.Fragment,null,(he.length||$e||et)&&T.a.createElement("div",{className:"drift-widget-composer--pre-message-attachments"},T.a.createElement("style",null,"\n                .drift-widget-composer--pre-message-attachments button:focus {\n                  ".concat(Object(c.a)(Re),"\n                }\n            ")),et&&T.a.createElement(FileAttachmentErrorBanner,{attachmentState:He,clearFiles:Pe,disabled:u,reset:Ke}),(he.length||$e)&&T.a.createElement("ul",{className:"drift-widget-composer-attachment-preview-list"},[].concat(Object(r.a)(he),Object(r.a)($e?[{pending:!0}]:[])).map(function(e,t){var a;return T.a.createElement("li",{key:Ae[e]?Ae[e].id:"file-upload-loader"},Ae[e]&&!Ae.pending&&T.a.createElement(U.a,{"aria-label":"Remove attachment ".concat(t+1),onClick:function onClick(){return function onRemoveUploadedAttachment(e){Oe(function(t){return Object(oe.a)([e],t)})}(e)},disabled:u},T.a.createElement(h.j,{width:6,height:6})),Ae[e]&&!Ae.pending?function resolveAttachmentTypeComponent(e){return e?e.mimeType.includes("image")?T.a.createElement("div",{className:"drift-widget-composer-attachment-preview-list-image-wrapper"},T.a.createElement("img",{alt:e.fileName,src:e.publicUrl})):T.a.createElement("div",{className:"drift-widget-composer-attachment-non-image",title:e.filename},T.a.createElement("strong",null,e.fileName),T.a.createElement(h.k,{width:16,height:16,"aria-hidden":!0})):null}(Ae[e]):T.a.createElement(G.a,{size:"small",className:"drift-widget-composer-attachment-loader",titleId:"attachment-".concat(null===(a=Ae[e])||void 0===a?void 0:a.id,"-loading")}))}))),T.a.createElement("style",null,"\n          .drift-widget-composer--default button:hover > svg path {\n            fill: ".concat(xe,"\n          }\n        ")),T.a.createElement("div",Object.assign({},Xe({onClick:function onClick(e){return e.stopPropagation()}}),{className:s()("drift-widget-composer--default",{"drift-widget-composer--mobile":y,"drift-widget-composer--hidden":Qe}),tabIndex:void 0}),ke&&T.a.createElement("input",qe()),T.a.createElement("div",{className:"drift-widget-composer--text-area"},T.a.createElement("pre",null,Ze&&J.length?J:" "),T.a.createElement(P.a,{content:nt,htmlFor:"drift-widget-composer-input",type:"label"}),T.a.createElement("textarea",{className:s()("drift-widget-input js-focus-visible--controlled",{"keyboard-focused--outlined":ve}),ref:A,placeholder:nt,value:Ze?J:"",onChange:function onTextareaChange(e){Fe.length||(te(e.target.value),Ge())},onKeyDown:function handleTextareaKeydown(e){(B&&("Enter"===e.key||13===e.keyCode)||!B&&e.shiftKey&&"Enter"===e.key)&&(e.preventDefault(),(ge(J)||he.length)&&(at(J,fe),te("")))},"aria-label":"message composer",maxLength:4096,disabled:tt,id:"drift-widget-composer-input",style:Ie}),Ze&&!y&&T.a.createElement("button",{className:"drift-widget-composer-emoji-toggle",onClick:function onEmojiButtonClick(){tt||be(!ue)},disabled:u,"aria-pressed":ue,"aria-label":"".concat(ue?"close":"open"," emoji picker")},T.a.createElement(h.l,null))),Ze&&!y&&T.a.createElement(l.a,{open:ue,onAddEmoji:function onAddEmoji(e){be(!ue),Ze&&!u&&(te(e),A.current&&A.current.focus())},onClickOutside:function onEmojiPickerClickOutside(){be(!1)}}),Ze&&ot&&T.a.createElement("div",{className:s()("drift-widget-composer-actions",{"drift-widget-composer-actions-expanded":rt&&(it||ct)})},it&&T.a.createElement(D,{onAddGiphy:function onAddGiphy(e){return at(e,me)},disabled:u}),rt&&T.a.createElement(AttachmentIconButton,{isDisabled:u,open:Je}),!y&&T.a.createElement(AdditionalSettings,{disabled:u,setUseEnter:V,useEnter:B}),ct&&T.a.createElement("button",{className:s()("drift-widget-composer-send-button",{"drift-widget-composer-send-button--disabled":st}),"aria-label":"send message",onClick:function onClick(){return at(J,fe)},disabled:st||$e,ref:C},T.a.createElement(F.a,{color:"#".concat(Re)})))))}},fpJs:function(e,t,a){"use strict";var n=a("uDfI"),r=a("VkHq"),i=function showBrandingSelector(e){return e.embed.configuration.showBranding||!1};t.a=function useHasFooter(){var e=Object(n.c)(i),t=Object(r.a)().noPolicy;return e||!t}},fpMl:function(e,t,a){},gRD2:function(e,t,a){"use strict";var n=a("mj2O"),r=a.n(n),i=a("7SM1"),c=a("mssF"),o=a("K7i0"),s=a("xwTo"),l=a("LVcX"),u=a("ERkP"),d=a("uDfI"),m=a("0lfv");t.a=function useFetchActiveConverationMessages(){var e=Object(d.b)(),t=Object(d.c)(s.a),a=Object(d.c)(s.e);return{fetchMessages:Object(u.useCallback)(function(){var n=Object(i.a)(r.a.mark(function _callee(n){var i,s,u,d,f,g;return r.a.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(i=n.limit,s=void 0===i?30:i,u=n.from,d=void 0===u?null:u,!a){r.next=3;break}return r.abrupt("return");case 3:return r.prev=3,r.next=6,Object(c.d)({conversationId:t,limit:s,from:d});case 6:return f=r.sent,g=f.data,e(Object(o.k)({messages:g.data,hasMoreMessages:Object(l.a)(!1,["pagination","more"],g),nextPageMessageId:Object(l.a)(null,["pagination","next"],g),conversationId:t})),r.abrupt("return",g);case 12:r.prev=12,r.t0=r.catch(3),Object(m.f)("Failed to fetch messages",r.t0);case 15:case"end":return r.stop()}},_callee,null,[[3,12]])}));return function(e){return n.apply(this,arguments)}}(),[t,e,a])}}},iaVW:function(e,t,a){},jITz:function(e,t,a){"use strict";var n=a("s8DI"),r=a("ERkP"),i=function useEventListener(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,n=Object(r.useRef)();Object(r.useEffect)(function(){n.current=t},[t]),Object(r.useEffect)(function(){if(a&&a.addEventListener){var t=function eventListener(e){return n.current(e)};return a.addEventListener(e,t),function(){a.removeEventListener(e,t)}}},[e,a])};t.a=function useKeyPress(e){var t=e.element,a=void 0===t?window:t,c=e.targetKey,o=e.onKeyDown,s=void 0===o?function(){}:o,l=e.onKeyUp,u=void 0===l?function(){}:l,d=Object(r.useState)(!1),m=Object(n.a)(d,2),f=m[0],g=m[1],b=Object(r.useCallback)(function(e){e.key===c&&(g(!0),s(e))},[c,s]),v=Object(r.useCallback)(function(e){e.key===c&&(g(!1),u(e))},[c,u]);return i("keydown",b,a),i("keyup",v,a),f}},mQ2C:function(e,t,a){},nvPd:function(e,t,a){"use strict";var n=a("s8DI"),r=a("ERkP");t.a=function useInputValue(e){var t=Object(r.useState)(e),a=Object(n.a)(t,2),i=a[0],c=a[1];return{value:i,onChange:Object(r.useCallback)(function(e){var t,a;c(null!==(t=null===e||void 0===e?void 0:null===(a=e.currentTarget)||void 0===a?void 0:a.value)&&void 0!==t?t:"")},[])}}},"p0+K":function(e,t,a){},pYxh:function(e,t,a){"use strict";var n=a("O94r"),r=a.n(n),i=a("ERkP"),c=a.n(i);a("vYbd");t.a=function Card(e){return c.a.createElement("div",Object.assign({},e,{className:r()("drift-widget-card",e.className),tabIndex:-1}),e.children)}},"q+cq":function(e,t,a){"use strict";var n=a("O94r"),r=a.n(n),i=a("pYxh"),c=a("rmQ0"),o=a("ey6Y"),s=a("ERkP"),l=a.n(s),u=a("Tr4L");t.a=function MeetingSchedulerCard(e){var t=e.agentId,a=e.additionalAgents,n=void 0===a?[]:a,s=e.children,d=e.duration,m=e.showRecipients,f=void 0!==m&&m,g=e.loadingFrame,b=void 0!==g&&g,v=Object(u.a)().t,p=Object(o.a)(t,n),j=v("meeting.scheduleAMeeting");f&&(j=t?"".concat(j," with ").concat(p):j);var h=b?{}:{minHeight:"350px"};return l.a.createElement(i.a,{"aria-label":j,"aria-hidden":"true",className:r()("drift-meeting-scheduler",{"drift-meeting-scheduler--loader":b}),style:h},l.a.createElement(c.a,{className:"drift-meeting-scheduler--header"},l.a.createElement("span",null,j),d&&l.a.createElement("span",null,v("meeting.duration",{duration:d}))),l.a.createElement("div",{className:"drift-meeting-scheduler--content"},s))}},rmQ0:function(e,t,a){"use strict";var n=a("nfbA"),r=a("O94r"),i=a.n(r),c=a("lE29"),o=a("ERkP"),s=a.n(o);a("9wXn");t.a=function CardHeader(e){var t=Object(c.a)().cardHeaderTheme;return s.a.createElement("header",Object.assign({},e,{className:i()("drift-widget-card-header",e.className),style:Object(n.a)(Object(n.a)({},t),e.style)}),s.a.createElement("div",{className:"drift-widget-card-header--content"},e.children))}},slYP:function(e,t,a){"use strict";var n=a("s8DI"),r=a("O94r"),i=a.n(r),c=a("rmQ0"),o=a("+Kbs"),s=a("nQD+"),l=a("hX/4"),u=a("ZGTz"),d=a("ERkP"),m=a.n(d),f=a("ADGC"),g=(a("+GZi"),function TextArea(e){var t=e.value,a=e.onValueChange,r=Object(l.a)(e,["value","onValueChange"]),c=Object(f.a)(!0),g=Object(d.useState)(!1),b=Object(n.a)(g,2),v=b[0],p=b[1],j=Object(d.useRef)(null),h=Object(d.useRef)(null);return m.a.createElement(m.a.Fragment,null,!c&&m.a.createElement(u.a,{open:v,onAddEmoji:function onAddEmoji(e){p(!v),r.disabled||(a&&a(e),h.current&&h.current.focus())},onClickOutside:function onEmojiPickerClickOutside(e){j.current&&j.current.contains(e.target)||p(!1)}}),m.a.createElement("div",{className:"drift-widget-textarea"},m.a.createElement("pre",null,t&&t.length?t:" "),m.a.createElement("textarea",Object.assign({},r,{className:i()("drift-widget-input",r.className),value:t,ref:h,onChange:function onTextAreaChange(e){a&&a(e.target.value),r.onChange&&r.onChange(e)},disabled:r.disabled})),!r.disabled&&!c&&m.a.createElement(s.a,{ref:j,className:"drift-widget-textarea--emoji-toggle",onClick:function onEmojiButtonClick(){r.disabled||p(!v)},disabled:r.disabled,"aria-expanded":v,"aria-label":"emojis"},m.a.createElement(o.l,null))))}),b=a("Mur8"),v=a("jITz"),p=a("fJrp"),j=a("lE29"),h=a("K7i0"),O=a("+oIK"),E=a("da4L"),w=a("Tr4L"),y=a("uDfI"),A=a("PjZB");a("Jrg8"),t.a=function RateConversation(e){var t=e.message,a=Object(w.a)().t,r=Object(j.a)(),l=r.activeColor,u=r.conversationRatingCloseButtonTheme,f=r.conversationRatingHeaderTheme,C=r.conversationRatingBodyTheme,k=r.composerTheme,N=Object(p.a)(t),L=Object(y.b)(),T=Object(y.c)(function(e){return e.session}).endUser,S=Object(d.useState)(!0),M=Object(n.a)(S,2),R=M[0],I=M[1],x=Object(d.useState)(""),B=Object(n.a)(x,2),D=B[0],F=B[1],P=Object(d.useState)(0),U=Object(n.a)(P,2),G=U[0],_=U[1],V=Object(d.useMemo)(function(){return Object(E.a)(t,"ratingPrompt")},[t]),H=V.ratingPromptMessage,z=V.ratingAcknowledgement,K=Object(v.a)({targetKey:"Enter"}),Z=Object(d.useCallback)(function(){var e=Object(O.a)({message:"",activeConversation:t.conversationId,authorId:T.id,attributes:{conversationRating:{ratingPrompt:{ratingAcknowledgement:z,ratingPromptMessage:H.trim()},ratingValue:G,ratingText:D}},contentType:A.c.BOT_CONVERSATION_RATING,type:A.e.BOT_CONVERSATION_RATING});L(Object(h.n)({message:e})),I(!1)},[t,L,T.id,z,H,D,G]);Object(d.useEffect)(function(){K&&function isValidMessage(e){return e&&e.trim().length>0}(D)&&Z()},[K,D,Z]),Object(d.useEffect)(function(){N&&N!==t&&!R&&I(!0)},[t,N,R]);var Q=Object(d.useMemo)(function(){return b.a.map(function(e){var t=e.emoji,a=e.value;return m.a.createElement(s.a,{className:i()("drift-widget-rate-conversation--rating",{"drift-widget-rate-conversation--rating--selected":a===G}),key:"rating_".concat(a),"aria-label":"rate ".concat(a),onClick:function onClick(){return _(a)}},t)})},[G]);if(!R)return null;return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"drift-widget-rate-conversation--cover"}),m.a.createElement("div",{className:"drift-widget-rate-conversation"},m.a.createElement(c.a,{style:f},m.a.createElement("span",null,H),m.a.createElement(s.a,{className:"drift-widget-rate-conversation--close-button","aria-label":"close rating",onClick:function onClick(){return I(!1)}},m.a.createElement(o.j,{width:20,height:20,fill:u.color}))),m.a.createElement("div",{className:"drift-widget-rate-conversation--body",style:C},m.a.createElement("div",{className:"drift-widget-rate-conversation--ratings"},Q),!!G&&m.a.createElement("div",{className:"drift-widget-rate-conversation--composer"},m.a.createElement("div",{className:"drift-widget-rate-conversation--actions"},m.a.createElement(s.a,{className:"drift-widget-rate-conversation--send-button",onClick:Z},m.a.createElement(o.p,{color:"#".concat(l)}))),m.a.createElement(g,{"aria-label":"rating input",maxLength:4096,placeholder:a("form.placeholder.tellUsMore"),onValueChange:function onTextAreaValueChange(e){K||F(e)},value:D,style:k})))))}},vLHT:function(e,t,a){"use strict";var n=a("fTFZ"),r=a("xwTo"),i=a("da4L"),c=a("i9gz"),o=a("TbSn"),s=a("kNJ0"),l=a("ERkP"),u=a("uDfI");t.a=function useComposerState(){var e=Object(u.c)(r.f),t=Object(u.c)(r.g);return Object(l.useMemo)(function(){if(e)return n.a.UNAVAILABLE;if(Object(c.a)(t))return n.a.AVAILABLE;var a=Object(o.a)(t),r=Object(s.a)(-2,t),l=Object(i.f)(r)&&Object(i.i)(a);return Object(i.f)(a)||l||Object(i.j)(a)?n.a.UNAVAILABLE_BUTTONS:Object(i.o)(a)||Object(i.o)(r)&&Object(i.i)(a)?n.a.AVAILABLE_BUTTONS:n.a.AVAILABLE},[e,t])}},vYbd:function(e,t,a){},vkRn:function(e,t,a){"use strict";var n=a("O94r"),r=a.n(n),i=a("BA/U"),c=a("noex"),o=a("yEsl"),s=a("MQZS"),l=a("fw6E"),u=a("da4L"),d=a("LVcX"),m=a("i9gz"),f=a("TbSn"),g=a("uDfI"),b=function useLastMessage(e){var t=Object(g.c)(function(t){return Object(d.a)(null,["conversations","conversations",e,"lastMessage"],t)}),a=Object(g.c)(function(t){var a=Object(d.a)({},["conversations","messages",e],t);if(!Object(m.a)(a)){var n=Object(u.r)(a);if(n.length)return Object(f.a)(n)}return null});return t||a||{}},v=a("58kB"),p=a("kXeL"),j=a.n(p),h=a("ERkP"),O=a.n(h),E=a("Tr4L"),w=function useUserResolution(){var e=Object(E.a)().t,t=Object(g.c)(function(e){return e.session.endUser});return Object(h.useMemo)(function(){return{id:t.id,name:Object(d.a)(e("user.self"),["name"],t),avatar:Object(d.a)(j.a,["socialProfile","avatar"],t),email:Object(d.a)(null,["socialProfile","email"],t)}},[t,e])},y=a("SsZN"),A=a("Wjfv"),C=a("K7i0"),k=a("fsHk"),N=(a("JhcM"),/\r?\n|\r/g),L=function ConversationHistoryListItem(e){var t,a,n=e.conversation,r=void 0===n?{}:n,f=Object(l.a)().onToggleConversationHistory,p=Object(E.a)().t,j=Object(g.b)(),L=w(),T=Object(h.useMemo)(function(){return Object(d.a)(null,["conversation","id"],r)},[r]),S=b(T),M=Object(h.useMemo)(function(){return Object(d.a)(null,["authorId"],S)},[S]),R=Object(v.a)(M).recipient,I=Object(u.i)(S),x=Object(s.a)(M,R.bot),B=function toggleConversation(e){return function(){e&&(f(!1),j(Object(A.a)()),j(Object(C.o)({conversationId:e})),Object(y.f)(e))}};if(Object(m.a)(S))return null;var D=S.createdAt,F=S.attributes,P=void 0===F?{}:F,U=D||(null===P||void 0===P?void 0:P.generatedAt),G=k.a.isTimeToday(U),_=G?k.a.unixFormatDateTime(U,p("dt.format.time.short")):k.a.unixFormatDateTime(U,p("dt.format.date.short")),V=I?L.name:R.name,H=!!(null===P||void 0===P?void 0:null===(t=P.preview)||void 0===t?void 0:null===(a=t.replace(N,""))||void 0===a?void 0:a.trim()),z="".concat(G?"today at ".concat(_):"on ".concat(_)),K="".concat(H?"Conversation preview: ".concat(P.preview,"."):""),Z="Agent ".concat(V," is currently ").concat(x,". "),Q="".concat(Z," Click to open conversation with ").concat(V," ").concat(z,". ").concat(K);return O.a.createElement("li",{className:"drift-widget-conversation-list-item"},O.a.createElement("div",{"aria-label":Q,className:"drift-widget-conversation-list-item-body",onClick:B(r.conversation.id),onKeyDown:Object(i.a)(B(r.conversation.id)),role:"button",tabIndex:0},I?O.a.createElement(o.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:L.avatar}):O.a.createElement(c.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:R.avatarUrl,id:M}),O.a.createElement("div",{className:"drift-widget-conversation-list-item-content"},O.a.createElement("h2",null,V),O.a.createElement("span",{className:"drift-widget-conversation-list-item-time"},_),O.a.createElement("p",{className:"drift-widget-conversation-list-item-last-message"},P.preview))))},T=a("DboL"),S=a("9xv8");a("PGb/"),t.a=function ConversationHistory(){var e=Object(l.a)().conversationHistoryOpen,t=Object(g.c)(function(e){return e.conversations.conversations}),a=Object(h.useMemo)(function(){var e;return null!==(e=Object(S.d)(Object(T.a)(t),"updatedAt"))&&void 0!==e?e:[]},[t]),n=Object(h.useMemo)(function(){return O.a.createElement("ul",{className:"drift-widget-conversation-history-list"},a.map(function(e){return O.a.createElement(L,{key:e.conversation.id,conversation:e})}))},[a]);return O.a.createElement("div",{className:r()("drift-widget-conversation-history",{"drift-widget-conversation-history--open":e}),"aria-hidden":!e},e&&n)}},y0on:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a("0lfv"),r=function getNewMessageAriaLabel(e,t){return Object(n.m)(t)?null:"Chat message".concat(e?" from "+e:"",': "').concat(t,'"')}},yAze:function(e,t,a){},z24s:function(e,t,a){"use strict";var n=a("s8DI"),r=a("ERkP");t.a=function useKeyboardNavigation(e){var t=Object(r.useState)(!1),a=Object(n.a)(t,2),i=a[0],c=a[1],o=Object(r.useCallback)(function(t){"Tab"===t.key&&t.target===e.current&&c(!0)},[e]),s=Object(r.useCallback)(function(t){t.target===e.current&&c(!1)},[e]);return Object(r.useEffect)(function(){return window.addEventListener("keyup",o),window.addEventListener("focusout",s),function(){window.removeEventListener("keyup",o),window.removeEventListener("focusout",s)}},[s,o]),i}},zJmF:function(e,t,a){"use strict";a.d(t,"a",function(){return Input});var n=a("jm9a"),r=a("hX/4"),i=a("O94r"),c=a.n(i),o=a("z24s"),s=a("ERkP"),l=a.n(s);a("BNKP");function Input(e){var t,a=e.className,i=void 0===a?"":a,u=e.shouldFocus,d=void 0===u||u,m=Object(r.a)(e,["className","shouldFocus"]),f=Object(s.useRef)(),g=Object(o.a)(f);return Object(s.useEffect)(function(){f.current&&d&&f.current.focus()},[d]),l.a.createElement("input",Object.assign({className:c()("drift-widget-input js-focus-visible--controlled",(t={},Object(n.a)(t,i,!!i),Object(n.a)(t,"keyboard-focused",g),t)),ref:f},m))}},zoZM:function(e,t,a){}}]);